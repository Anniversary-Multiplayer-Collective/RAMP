D:\eldewrito\eldewrito 0.7\ElDewrito\maps

# echo ==Set Variables...==
SetVariable workingdir ""
SetVariable modsfolder ""
SetVariable reachmaps ""
SetVariable odstmaps ""

# echo ==Set Caches...==
UseAudioCache workingdir\caches\audiocache
UseShaderCache workingdir\caches\shadercache

# echo ==Creating Mod Package...==
CreateModPackage 1 large
Reach Anniversary Multiplayer
Welcome to RAMP, a community effort to transform Eldewrito into Halo Reach while keeping ED main features and adding new ones. Featuring extensive bug fixes, quality of life improvements, and plenty of new content to play with. We hope you enjoy this labor of love, we'll see you starside.
AMP Collective
0.94
MainMenu Multiplayer Character

editmodmetadata
SetField metadata.URL https://github.com/Zekken01/Ramp-2
savemodmetadata
Exit

# Update the version at the bottom of the pak

## NO VALID RESOURCE DEFINITION IN ANY REACH CACHE
## rasterizer\water\static_wave\static_wave_slope_water.bitmap
OpenCacheFile "reachmaps\70_boneyard.map"
PortTag rasterizer\rain\rain_noise_boundary.bitmap
Exit
OpenCacheFile "reachmaps\forge_halo.map"
PortTag shaders\shader_options\bump_detail_blend.render_method_option
PortTag shaders\shader_options\bump_three_detail_blend.render_method_option
PortTag shaders\shader_options\bump_default_wrinkle.render_method_option
PortTag shaders\shader_options\bump_detail_wrinkle.render_method_option
PortTag shaders\glass_options\glass_specular_option.render_method_option
PortTag shaders\wetness_options\wetness_simple.render_method_option
PortTag shaders\wetness_options\wetness_flood.render_method_option
PortTag shaders\shader_options\blend_source_from_albedo_alpha.render_method_option
PortTag shaders\shader_options\blend_source_from_opacity_map.render_method_option
Exit

CreateTag glvs shaders\glass_shared_vertex_shaders
CreateTag glps shaders\glass_shared_pixel_shaders
CreateTag rmdf shaders\glass

EditTag shaders\glass.rmdf
StringId add calc_bumpmap_detail_blend_vs
StringId add calc_bumpmap_detail_blend_ps
StringId add calc_bumpmap_three_detail_blend_vs
StringId add calc_bumpmap_three_detail_blend_ps
StringId add standard_wrinkle
StringId add calc_bumpmap_default_wrinkle_vs
StringId add calc_bumpmap_default_wrinkle_ps
StringId add detail_wrinkle
StringId add calc_bumpmap_detail_wrinkle_vs
StringId add calc_bumpmap_detail_wrinkle_ps
StringId add wetness
StringId add calc_wetness_simple_ps
StringId add flood
StringId add calc_wetness_flood_ps
StringId add calc_wetness_ps
StringId add alpha_blend_source
StringId add from_albedo_alpha_without_fresnel
StringId add albedo_alpha_without_fresnel
StringId add albedo_alpha
StringId add from_opacity_map_alpha
StringId add opacity_map_alpha
StringId add from_opacity_map_rgb
StringId add opacity_map_rgb
StringId add from_opacity_map_alpha_and_albedo_alpha
StringId add opacity_map_alpha_and_albedo_alpha

SetField GlobalOptions shaders\shader_options\global_shader_options.render_method_option
AddBlockElements Categories 6
SetField Categories[0].Name albedo
AddBlockElements Categories[0].ShaderOptions 1
SetField Categories[0].ShaderOptions[0].Name map
SetField Categories[0].ShaderOptions[0].Option shaders\shader_options\albedo_default.render_method_option
SetField Categories[0].ShaderOptions[0].VertexFunction calc_albedo_default_vs
SetField Categories[0].ShaderOptions[0].PixelFunction calc_albedo_default_ps
SetField Categories[0].VertexFunction calc_albedo_vs
SetField Categories[0].PixelFunction calc_albedo_ps
SetField Categories[1].Name bump_mapping
AddBlockElements Categories[1].ShaderOptions 7
SetField Categories[1].ShaderOptions[0].Name off
SetField Categories[1].ShaderOptions[0].Option shaders\shader_options\bump_off.render_method_option
SetField Categories[1].ShaderOptions[0].VertexFunction calc_bumpmap_off_vs
SetField Categories[1].ShaderOptions[0].PixelFunction calc_bumpmap_off_ps
SetField Categories[1].ShaderOptions[1].Name standard
SetField Categories[1].ShaderOptions[1].Option shaders\shader_options\bump_default.render_method_option
SetField Categories[1].ShaderOptions[1].VertexFunction calc_bumpmap_default_vs
SetField Categories[1].ShaderOptions[1].PixelFunction calc_bumpmap_default_ps
SetField Categories[1].ShaderOptions[2].Name detail
SetField Categories[1].ShaderOptions[2].Option shaders\shader_options\bump_detail.render_method_option
SetField Categories[1].ShaderOptions[2].VertexFunction calc_bumpmap_detail_vs
SetField Categories[1].ShaderOptions[2].PixelFunction calc_bumpmap_detail_ps
SetField Categories[1].ShaderOptions[3].Name detail_blend
SetField Categories[1].ShaderOptions[3].Option shaders\shader_options\bump_detail_blend.render_method_option
SetField Categories[1].ShaderOptions[3].VertexFunction calc_bumpmap_detail_blend_vs
SetField Categories[1].ShaderOptions[3].PixelFunction calc_bumpmap_detail_blend_ps
SetField Categories[1].ShaderOptions[4].Name three_detail_blend
SetField Categories[1].ShaderOptions[4].Option shaders\shader_options\bump_three_detail_blend.render_method_option
SetField Categories[1].ShaderOptions[4].VertexFunction calc_bumpmap_three_detail_blend_vs
SetField Categories[1].ShaderOptions[4].PixelFunction calc_bumpmap_three_detail_blend_ps
SetField Categories[1].ShaderOptions[5].Name standard_wrinkle
SetField Categories[1].ShaderOptions[5].Option shaders\shader_options\bump_default_wrinkle.render_method_option
SetField Categories[1].ShaderOptions[5].VertexFunction calc_bumpmap_default_wrinkle_vs
SetField Categories[1].ShaderOptions[5].PixelFunction calc_bumpmap_default_wrinkle_ps
SetField Categories[1].ShaderOptions[6].Name detail_wrinkle
SetField Categories[1].ShaderOptions[6].Option shaders\shader_options\bump_detail_wrinkle.render_method_option
SetField Categories[1].ShaderOptions[6].VertexFunction calc_bumpmap_detail_wrinkle_vs
SetField Categories[1].ShaderOptions[6].PixelFunction calc_bumpmap_detail_wrinkle_ps
SetField Categories[1].VertexFunction calc_bumpmap_vs
SetField Categories[1].PixelFunction calc_bumpmap_ps
SetField Categories[2].Name material_model
AddBlockElements Categories[2].ShaderOptions 1
SetField Categories[2].ShaderOptions[0].Name two_lobe_phong_reach
SetField Categories[2].ShaderOptions[0].Option shaders\glass_options\glass_specular_option.render_method_option
SetField Categories[2].ShaderOptions[0].VertexFunction invalid
SetField Categories[2].ShaderOptions[0].PixelFunction two_lobe_phong_reach
SetField Categories[2].VertexFunction invalid
SetField Categories[2].PixelFunction material_type
SetField Categories[3].Name environment_mapping
AddBlockElements Categories[3].ShaderOptions 4
SetField Categories[3].ShaderOptions[0].Name none
SetField Categories[3].ShaderOptions[0].Option null
SetField Categories[3].ShaderOptions[0].VertexFunction invalid
SetField Categories[3].ShaderOptions[0].PixelFunction none
SetField Categories[3].ShaderOptions[1].Name per_pixel
SetField Categories[3].ShaderOptions[1].Option shaders\shader_options\env_map_per_pixel.render_method_option
SetField Categories[3].ShaderOptions[1].VertexFunction invalid
SetField Categories[3].ShaderOptions[1].PixelFunction per_pixel
SetField Categories[3].ShaderOptions[2].Name dynamic
SetField Categories[3].ShaderOptions[2].Option shaders\shader_options\env_map_dynamic.render_method_option
SetField Categories[3].ShaderOptions[2].VertexFunction invalid
SetField Categories[3].ShaderOptions[2].PixelFunction dynamic
SetField Categories[3].ShaderOptions[3].Name from_flat_texture
SetField Categories[3].ShaderOptions[3].Option shaders\shader_options\env_map_from_flat_texture.render_method_option
SetField Categories[3].ShaderOptions[3].VertexFunction invalid
SetField Categories[3].ShaderOptions[3].PixelFunction from_flat_texture
SetField Categories[3].VertexFunction invalid
SetField Categories[3].PixelFunction envmap_type
SetField Categories[4].Name wetness
AddBlockElements Categories[4].ShaderOptions 2
SetField Categories[4].ShaderOptions[0].Name simple
SetField Categories[4].ShaderOptions[0].Option shaders\wetness_options\wetness_simple.render_method_option
SetField Categories[4].ShaderOptions[0].VertexFunction invalid
SetField Categories[4].ShaderOptions[0].PixelFunction calc_wetness_simple_ps
SetField Categories[4].ShaderOptions[1].Name flood
SetField Categories[4].ShaderOptions[1].Option shaders\wetness_options\wetness_flood.render_method_option
SetField Categories[4].ShaderOptions[1].VertexFunction invalid
SetField Categories[4].ShaderOptions[1].PixelFunction calc_wetness_flood_ps
SetField Categories[4].VertexFunction invalid
SetField Categories[4].PixelFunction calc_wetness_ps
SetField Categories[5].Name alpha_blend_source
AddBlockElements Categories[5].ShaderOptions 5
SetField Categories[5].ShaderOptions[0].Name from_albedo_alpha_without_fresnel
SetField Categories[5].ShaderOptions[0].Option null
SetField Categories[5].ShaderOptions[0].VertexFunction invalid
SetField Categories[5].ShaderOptions[0].PixelFunction albedo_alpha_without_fresnel
SetField Categories[5].ShaderOptions[1].Name from_albedo_alpha
SetField Categories[5].ShaderOptions[1].Option shaders\shader_options\blend_source_from_albedo_alpha.render_method_option
SetField Categories[5].ShaderOptions[1].VertexFunction invalid
SetField Categories[5].ShaderOptions[1].PixelFunction albedo_alpha
SetField Categories[5].ShaderOptions[2].Name from_opacity_map_alpha
SetField Categories[5].ShaderOptions[2].Option shaders\shader_options\blend_source_from_opacity_map.render_method_option
SetField Categories[5].ShaderOptions[2].VertexFunction invalid
SetField Categories[5].ShaderOptions[2].PixelFunction opacity_map_alpha
SetField Categories[5].ShaderOptions[3].Name from_opacity_map_rgb
SetField Categories[5].ShaderOptions[3].Option shaders\shader_options\blend_source_from_opacity_map.render_method_option
SetField Categories[5].ShaderOptions[3].VertexFunction invalid
SetField Categories[5].ShaderOptions[3].PixelFunction opacity_map_rgb
SetField Categories[5].ShaderOptions[4].Name from_opacity_map_alpha_and_albedo_alpha
SetField Categories[5].ShaderOptions[4].Option shaders\shader_options\blend_source_from_opacity_map.render_method_option
SetField Categories[5].ShaderOptions[4].VertexFunction invalid
SetField Categories[5].ShaderOptions[4].PixelFunction opacity_map_alpha_and_albedo_alpha
SetField Categories[5].VertexFunction invalid
SetField Categories[5].PixelFunction alpha_blend_source
AddBlockElements EntryPoints 3
SetField EntryPoints[0].EntryPoint Static_Sh
SetField EntryPoints[1].EntryPoint Static_Per_Vertex
SetField EntryPoints[2].EntryPoint Static_Prt_Ambient
AddBlockElements EntryPoints[0].Passes 1
AddBlockElements EntryPoints[1].Passes 1
AddBlockElements EntryPoints[2].Passes 1
AddBlockElements VertexTypes 3
SetField VertexTypes[0].VertexType World
SetField VertexTypes[1].VertexType Rigid
SetField VertexTypes[2].VertexType Skinned
SetField GlobalPixelShader shaders\glass_shared_pixel_shaders.glps
SetField GlobalVertexShader shaders\glass_shared_vertex_shaders.glvs
SetField Flags None
SetField Version 0
SaveTagChanges
Exit
GenerateShader glvs glass
GenerateShader glps glass
SaveTagNames

# Thanks to NoShotz for helping out :), really appreciate it
# echo ==Add default bitmap + parameter for reach diffuse power...==
OpenCacheFile "reachmaps\dlc_slayer.map"
PortTag rasterizer\diffuse_power_specular\diffuse_power.bitmap
Exit
EditTag *.rasg
AddBlockElements defaultbitmaps
SetField defaultbitmaps[*].bitmap rasterizer\diffuse_power_specular\diffuse_power.bitmap
SaveTagChanges
Exit
StringId add g_diffuse_power_specular
EditTag shaders\shader_options\material_cook_torrance_option_reach.render_method_option
AddBlockElements parameters
SetField parameters[*].name g_diffuse_power_specular
SetField parameters[*].RenderMethodExtern material_diffuse_power
SaveTagChanges
Exit
EditTag shaders\shader_options\material_two_lobe_phong_option_reach.render_method_option
AddBlockElements parameters
SetField parameters[*].name g_diffuse_power_specular
SetField parameters[*].RenderMethodExtern material_diffuse_power
SaveTagChanges
Exit

# echo ==Fix missing parameters in reach cook torrance...==
EditTag shaders\shader_options\material_cook_torrance_option_reach.render_method_option
AddBlockElements parameters
SetField parameters[*].Name g_sampler_cc0236
SetField parameters[*].rendermethodextern texture_cook_torrance_cc0236
AddBlockElements parameters
SetField parameters[*].Name g_sampler_dd0236
SetField parameters[*].rendermethodextern texture_cook_torrance_dd0236
AddBlockElements parameters
SetField parameters[*].Name g_sampler_c78d78
SetField parameters[*].rendermethodextern texture_cook_torrance_c78d78
SaveTagChanges
Exit

# echo ==Reach water vertex shader...==
##GenerateShader glvs water

# echo ==Bitmap Fixes...==
RunCommands "workingdir\cmds\bitmap_fixes.cmds"

echo ==Revenant==

OpenModPackage "workingdir\paks\revenant.pak"
ApplyModPackage
ExitModPackage

AddForgeItem "REVENANT" "VEHICLES" objects\vehicles\covenant\revenant\revenant.vehicle


echo ==Hugegrass Falcon==

OpenModPackage "workingdir\paks\hugegrassfalcon.pak"
ApplyModPackage
ExitModPackage

#Add to forge palette
AddForgeItem "FALCON" "VEHICLES" objects\vehicles\human\falcon\falcon.vehicle
AddForgeItem "FALCON, TRANSPORT" "VEHICLES" objects\vehicles\human\falcon\falcon_transport.vehicle
AddForgeItem "FALCON, NOSE GUN" "VEHICLES" objects\vehicles\human\falcon\falcon_nose_gun.vehicle

EditTag objects\vehicles\falcon\falcon_transport.model
SetField NewDamageInfo[0].MaximumVitality 500
SetField NewDamageInfo[0].StunTime 0
SetField NewDamageInfo[0].RechargeTime 1
SetField NewDamageInfo[0].RechargeFraction 0.1
SetField NewDamageInfo[0].ShieldStunTime 0
SetField NewDamageInfo[0].ShieldRechargeTime 0
SetField NewDamageInfo[0].RuntimeShieldRechargeVelocity 1000
SetField NewDamageInfo[0].RuntimeHealthRechargeVelocity 10
SetField NewDamageInfo[0].StunTime 2
SetField NewDamageInfo[0].DamageSections[0].Flags TakesFullDamageWhenObjectDies
SetField NewDamageInfo[0].DamageSections[0].StunTime 4
SetField NewDamageInfo[0].DamageSections[0].RechargeTime 10
SetField NewDamageInfo[0].DamageSections[0].RuntimeRechargeVelocity 0.1
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[0].Flags None
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[4].Flags KillsObject,KillsVariantObjects
setfield AnimationDistance 250
SaveTagChanges
Exit

EditTag objects\vehicles\falcon\falcon_nose_gun.model
SetField NewDamageInfo[0].MaximumVitality 500
SetField NewDamageInfo[0].StunTime 0
SetField NewDamageInfo[0].RechargeTime 1
SetField NewDamageInfo[0].RechargeFraction 0.1
SetField NewDamageInfo[0].ShieldStunTime 0
SetField NewDamageInfo[0].ShieldRechargeTime 0
SetField NewDamageInfo[0].RuntimeShieldRechargeVelocity 1000
SetField NewDamageInfo[0].RuntimeHealthRechargeVelocity 10
SetField NewDamageInfo[0].StunTime 2
SetField NewDamageInfo[0].DamageSections[0].Flags TakesFullDamageWhenObjectDies
SetField NewDamageInfo[0].DamageSections[0].StunTime 4
SetField NewDamageInfo[0].DamageSections[0].RechargeTime 10
SetField NewDamageInfo[0].DamageSections[0].RuntimeRechargeVelocity 0.1
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[0].Flags None
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[4].Flags KillsObject,KillsVariantObjects
setfield AnimationDistance 250
SaveTagChanges
Exit

EditTag objects\vehicles\falcon\falcon.model
SetField NewDamageInfo[0].MaximumVitality 500
SetField NewDamageInfo[0].StunTime 0
SetField NewDamageInfo[0].RechargeTime 1
SetField NewDamageInfo[0].RechargeFraction 0.1
SetField NewDamageInfo[0].ShieldStunTime 0
SetField NewDamageInfo[0].ShieldRechargeTime 0
SetField NewDamageInfo[0].RuntimeShieldRechargeVelocity 1000
SetField NewDamageInfo[0].RuntimeHealthRechargeVelocity 10
SetField NewDamageInfo[0].StunTime 2
SetField NewDamageInfo[0].DamageSections[0].Flags TakesFullDamageWhenObjectDies
SetField NewDamageInfo[0].DamageSections[0].StunTime 4
SetField NewDamageInfo[0].DamageSections[0].RechargeTime 10
SetField NewDamageInfo[0].DamageSections[0].RuntimeRechargeVelocity 0.1
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[0].Flags None
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[4].Flags KillsObject,KillsVariantObjects
setfield AnimationDistance 250
SaveTagChanges
Exit

EditTag objects\vehicles\human\falcon\falcon.vehicle
SetField PhysicsTypes.Vtol[0].LiftAnglesAcceleration 360
SetField PhysicsTypes.Vtol[0].RenderLiftAnglesAcceleration 360
SetField PhysicsTypes.Vtol[0].PropellerRotationSpeed 2 4
SetField PhysicsTypes.Vtol[0].SpeedParameters.MaximumForwardAcceleration 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.MaximumLeftAcceleration 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.RotorDamping 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccExp 1
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccScale 10
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccK 0.7
SetField PhysicsTypes.Vtol[0].TurnAccelerationGain 30
SetField PhysicsTypes.Vtol[0].MinimumUpAcceleration 0.3
SetField PhysicsTypes.Vtol[0].MaximumUpAcceleration 6
SaveTagChanges
Exit

EditTag objects\vehicles\human\falcon\falcon_nose_gun.vehicle
SetField PhysicsTypes.Vtol[0].LiftAnglesAcceleration 360
SetField PhysicsTypes.Vtol[0].RenderLiftAnglesAcceleration 360
SetField PhysicsTypes.Vtol[0].PropellerRotationSpeed 2 4
SetField PhysicsTypes.Vtol[0].SpeedParameters.MaximumForwardAcceleration 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.MaximumLeftAcceleration 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.RotorDamping 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccExp 1
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccScale 10
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccK 0.7
SetField PhysicsTypes.Vtol[0].TurnAccelerationGain 30
SetField PhysicsTypes.Vtol[0].MinimumUpAcceleration 0.3
SetField PhysicsTypes.Vtol[0].MaximumUpAcceleration 6
SaveTagChanges
Exit

EditTag objects\vehicles\human\falcon\falcon_transport.vehicle
SetField PhysicsTypes.Vtol[0].LiftAnglesAcceleration 360
SetField PhysicsTypes.Vtol[0].RenderLiftAnglesAcceleration 360
SetField PhysicsTypes.Vtol[0].PropellerRotationSpeed 2 4
SetField PhysicsTypes.Vtol[0].SpeedParameters.MaximumForwardAcceleration 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.MaximumLeftAcceleration 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.RotorDamping 6
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccExp 1
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccScale 10
SetField PhysicsTypes.Vtol[0].SpeedParameters.MagicAngularAccK 0.7
SetField PhysicsTypes.Vtol[0].TurnAccelerationGain 30
SetField PhysicsTypes.Vtol[0].MinimumUpAcceleration 0.3
SetField PhysicsTypes.Vtol[0].MaximumUpAcceleration 6
SaveTagChanges
Exit

echo ==Apply RAMP Vehicles==

OpenModPackage "workingdir\paks\rampvehicles.pak"
ApplyModPackage
ExitModPackage

EditTag objects\vehicles\warthog\warthog.render_model
SetField MarkerGroups[7].Markers[0].Translation -0.9237317 -0.2197281 0.095
SetField MarkerGroups[7].Markers[1].Translation -0.9237317 0.2204493 0.095
SetField MarkerGroups[19].Markers[0].Translation -0.9167317 0.22 0.09
SetField MarkerGroups[25].Markers[0].Translation -0.9167317 -0.22 0.09
SetField Geometry.Meshes[3].Parts[3].FlagsNew PreventBackfaceCulling
SetField Geometry.Meshes[2].Parts[2].FlagsNew PreventBackfaceCulling
SetField Geometry.Meshes[4].Parts[3].FlagsNew PreventBackfaceCulling
SetField Geometry.Meshes[5].Parts[3].FlagsNew PreventBackfaceCulling
SetField Geometry.Meshes[6].Parts[2].FlagsNew PreventBackfaceCulling
SaveTagChanges
Exit

EditTag objects\vehicles\human\warthog\shaders\warthog_brakelights.shader
SetArgument specular_coefficient 0.15
SaveTagChanges
Exit

echo ==Apply Reach Weapons==
OpenModPackage "workingdir\paks\Reach Weapons EK.pak"
ApplyModPackage
ExitModPackage 

EditTag objects\weapons\support_high\plasma_launcher\plasma_launcher.weapon
AddBlockElements TargetTracking 1
AddBlockElements TargetTracking[0].TrackingTypes 3
SetField TargetTracking[0].TrackingTypes[0].TrackingType2 bipeds
SetField TargetTracking[0].TrackingTypes[1].TrackingType2 flying_vehicles
SetField TargetTracking[0].TrackingTypes[2].TrackingType2 ground_vehicles
SetField TargetTracking[0].AcquireTime 0.35
SetField TargetTracking[0].GraceTime 0.6
SetField TargetTracking[0].DecayTime 0.6
SaveTagChanges
Exit

EditTag objects\weapons\support_high\rocket_launcher\rocket_launcher.weapon
removeblockelements TargetTracking[0].TrackingTypes 0 1
setfield TargetTracking[0].TrackingTypes[0].TrackingType2 flying_vehicles
setfield TargetTracking[0].AcquireTime 1.25
setfield TargetTracking[0].GraceTime 0.25
setfield TargetTracking[0].DecayTime 0.25
SetField WeaponAimAssist.MagnetismNearFalloffRange 1
savetagchanges
exit

EditTag objects\characters\masterchief\mp_masterchief\mp_masterchief.model
SetField Targets[0].LockOnData.LockOnDistance 20
SetField Targets[1].LockOnData.LockOnDistance 20
savetagchanges
exit

# Fix not able to melee while crouching if you're holding the Target Locator
EditTag objects\weapons\pistol\target_laser\target_laser.weapon
SetField WeaponName hp
SaveTagChanges
Exit

#Fix Sniper projectile

edittag objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon
setfield Barrels[0].Projectile objects\weapons\rifle\sniper_rifle\projectiles\sniper_bullet.projectile
savetagchanges
exit

echo ==Apply RAMP Weapon Variants==
OpenModPackage "workingdir\paks\RAMPWeaponVariants.pak"
ApplyModPackage
ExitModPackage

RunCommands workingdir\cmds\RAMPWeaponVariants.cmds

echo ==Remove newdamageinfo block for RAMP weapon variants==
RunCommands workingdir\cmds\remove_newdamageinfo.cmds

echo ==Rebalanced RAMP weapon variants==
RunCommands workingdir\cmds\RAMPWeapsRebalanced.cmds

echo ==RAMP weapon ammo equipment pickup fix==
RunCommands workingdir\cmds\RAMPWeapsAmmoPickup.cmds

# echo ==Apply RAMP Forge Blocks, Health Pack, Land Mine, TPs, Zealot Shield Door==
OpenModPackage "workingdir\paks\rampstuff.pak"
ApplyModPackage
ExitModPackage 

echo ==Apply RAMP HUD, UI, Main Menu, Customization, and Armor Abilities==
OpenModPackage "workingdir\paks\ramphud.pak"
ApplyModPackage
ExitModPackage

# Weapon backpack fix
edittag objects\characters\masterchief\mp_masterchief\mp_masterchief.render_model
setfield MarkerGroups[24].Markers[0].Translation 0.07424942 -0.09 -4.2322E-08
savetagchanges
exit

echo == Fix main menu logo in 4:3 aspect ratio ==
EditTag ui\halox\main_menu\main_menu.gui_screen_widget_definition
SetField GroupWidgets[1].Definition.BitmapWidgets[0].Definition.GuiRenderBlock.Bounds480i 323 253 367 646
savetagchanges
exit

echo ==SPI SHADER FIX==

edittag objects\characters\masterchief\shaders\spartan_helmet_s9_spi.shader
setargument booleans order3_area_specular
savetagchanges
exit

edittag objects\characters\masterchief\shaders\spartan_arm_s9_spi.shader
setargument booleans order3_area_specular
savetagchanges
exit

edittag objects\characters\masterchief\shaders\spartan_leg_s9_spi.shader
setargument booleans order3_area_specular
savetagchanges
exit

edittag objects\characters\masterchief\shaders\spartan_shoulder_s9_spi.shader
setargument booleans order3_area_specular
savetagchanges
exit

edittag objects\characters\masterchief\shaders\spartan_torso_s9_spi.shader
setargument booleans order3_area_specular
savetagchanges
exit

EditTag ui\halox\game_options\game_options.gui_skin_definition
SetField TextWidgets[0].Definition.GuiRenderBlock.AnimationCollection ui\halox\game_options\animations\options_list_item.gui_widget_animation_collection_definition
SetField TextWidgets[1].Definition.GuiRenderBlock.AnimationCollection ui\halox\game_options\animations\options_value.gui_widget_animation_collection_definition
SaveTagChanges
Exit

# echo ==Fixed all Armor names and descriptions in Customization==
RunCommands "workingdir\cmds\CustomizationStrings.cmds"

# echo ==Fix Shiny elite skin and teeth, arby cc, and Ranger visor

edittag objects\characters\elite\shaders\elite_base\head.shader
setargument rim_coefficient 0
setargument transparence_coefficient 0
savetagchanges
exit

edittag objects\characters\elite\shaders\elite_base\teeth.shader
setargument rim_coefficient 0
setargument transparence_coefficient 0
savetagchanges
exit

edittag objects\characters\elite\shaders\elite_helmet\elite_space_helmet_visor.shader
setargument specular_tint 0.09 0.04 0.9 1
setargument albedo_color 0.2 0.2 0.9 1
savetagchanges
exit

# echo ==Porting...==
EditTag objects\gear\human\military\crate_packing_giant\crate_packing_giant.render_model
SaveTagChanges
Exit
NameTag objects\gear\human\military\crate_packing_giant\crate_packing_giant.render_model objects\gear\human\military\crate_packing_giant\crate_packing_giant_h3
EditTag objects\gear\human\military\crate_packing_giant\crate_packing_giant_mp.model
SetField RenderModel objects\gear\human\military\crate_packing_giant\crate_packing_giant_h3.render_model
SaveTagChanges
Exit

EditTag shaders\invalid.shader
SaveTagChanges
Exit
NameTag shaders\invalid.shader shaders\invalid_h3

NameTag objects\gear\human\military\hu_mil_radio_big\hu_mil_radio_big.model objects\gear\human\military\hu_mil_radio_big\hu_mil_radio_big_h3
NameTag objects\gear\human\military\hu_mil_radio_big\hu_mil_radio_big.render_model objects\gear\human\military\hu_mil_radio_big\hu_mil_radio_big_h3

OpenCacheFile "reachmaps\20_sword_slayer.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
DoNotReplaceGroups bitm
PortTag Replace objects\gear\human\industrial\jersey_barrier\jersey_barrier.crate
DoNotReplaceGroups remove bitm
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\30_settlement.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit
EditTag levels\shared\decorators\bitmaps\dry_weedy_grass_dec.bitmap
ImportBitmap 0 "workingdir\bitmaps\dry_weedy_grass_dec.dds"
SaveTagChanges
Exit

OpenCacheFile "reachmaps\35_island.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

# Fix falcon being merged into bsp
EditTag levels\multi\35_island\35_island.scenario
SetField Vehicles[11].Position -189.719 -404.428 -59.795
SetField Vehicles[11].Rotation -35.406 -12.174 -2.97
SaveTagChanges
Exit

OpenCacheFile "reachmaps\45_aftship.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
PortTag Replace fx\particles\models\mesh_fx\blast_radius\blast_radius.particle
PortTag Replace fx\particles\models\mesh_fx\shield_sphere_glow.particle
Exit

OpenCacheFile "reachmaps\45_launch_station.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\50_panopticon.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\52_ivory_tower.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\70_boneyard.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

NameTag objects\weapons\grenade\frag_grenade\bitmaps\frag_grenade_illum.bitmap objects\weapons\grenade\frag_grenade\bitmaps\frag_grenade_illum_h3
OpenCacheFile "reachmaps\forge_halo.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
DoNotReplaceGroups bitm,prt3
PortTag Replace objects\gear\human\military\barricade_large\barricade_large.crate
PortTag Replace objects\gear\human\military\barricade_small\barricade_small.crate
PortTag Replace objects\gear\human\military\fusion_coil\fusion_coil.crate
PortTag Replace objects\gear\human\military\camping_stool_mp\camping_stool_mp.crate
PortTag Replace objects\weapons\grenade\frag_grenade\frag_grenade.equipment
PortTag Replace objects\weapons\grenade\plasma_grenade\plasma_grenade.equipment
PortTag Replace objects\weapons\grenade\frag_grenade\fx\projectile.effect
DoNotReplaceGroups remove bitm,prt3
PortTag objects\multi\boundaries\safe_volume.scen
PortTag sound\dialog\combat\elite2\default\14_1st_person\sprint.sound
PortTag sound\dialog\combat\elite2\default\14_1st_person\sprint_end.sound
PortTag sound\dialog\combat\spartan6_fem\default\14_1st_person\sprint.sound
PortTag sound\dialog\combat\spartan6_fem\default\14_1st_person\sprint_end.sound
PortTag sound\dialog\combat\spartan6_male\default\14_1st_person\sprint.sound
PortTag sound\dialog\combat\spartan6_male\default\14_1st_person\sprint_end.sound
PortTag sound\weapons\equipment\sprint\sprint_deactivate.sound
PortTag sound\characters\elite\shield_pop_elite.sound
PortTag sound\characters\spartan\shield_pop_spartan.sound
PortTag sound\dialog\multiplayer\reach\new_medals\revenge.sound
PortTag !Scripts !UpdateMapFiles *.scnr
PortTag objects\vehicles\covenant\revenant\turrets\revenant_plasma_turret\weapon\revenant_plasma_turret.projectile
Exit

# echo ==Fix Swapping Equipment With Grenades...==

EditTag objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField UseDuration 0
SetField NumberOfUses 0
SaveTagChanges
Exit
EditTag objects\weapons\grenade\plasma_grenade\plasma_grenade.equipment
SetField UseDuration 0
SetField NumberOfUses 0
SaveTagChanges
Exit

OpenCacheFile "reachmaps\cex_beaver_creek.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\cex_damnation.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\cex_hangemhigh.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\cex_headlong.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\cex_prisoner.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\cex_timberland.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\condemned.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\dlc_invasion.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\dlc_medium.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\dlc_slayer.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\trainingpreserve.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff10_prototype.map"

IgnoreBlamTag objects\characters\brute\brute.biped
IgnoreBlamTag objects\characters\brute_chieftain\brute_chieftain.biped
IgnoreBlamTag objects\characters\elite\elite.biped
IgnoreBlamTag objects\characters\elite_ai\elite_ai.biped
IgnoreBlamTag objects\characters\grunt\grunt.biped
IgnoreBlamTag objects\characters\jackal\jackal.biped
IgnoreBlamTag objects\characters\spartans\spartans.biped
IgnoreBlamTag objects\equipment\hologram\bipeds\hologram_elite.biped
IgnoreBlamTag objects\equipment\hologram\bipeds\hologram_jackal.biped
IgnoreBlamTag objects\equipment\hologram\bipeds\hologram_spartan.biped

SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff20_courtyard.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff30_waterfront.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff45_corvette.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff50_park.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff60_airview.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff60_icecave.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

## Cut to save space. R.I.P Holdout
OpenCacheFile "reachmaps\ff70_holdout.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\ff_unearthed.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
DoNotReplaceGroups bitm
PortTag Replace objects\gear\human\military\crate_packing\crate_packing.crate
PortTag Replace objects\gear\human\military\crate_packing_lid\crate_packing_lid.crate
PortTag Replace objects\gear\human\industrial\jersey_barrier_short\jersey_barrier_short.crate
DoNotReplaceGroups remove bitm
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

OpenCacheFile "reachmaps\cex_ff_halo.map"
SetPortingOption ReachLightmapCache "workingdir\caches\lightmapcache"
PortTag !Scripts !UpdateMapFiles *.scnr
Exit

echo ==Fix Particles being sideways==
EditTag levels\dlc\cex_ff_halo\fx\distantbeam.particle
SetField ParticleBillboardStyle ParallelToDirection
SaveTagChanges
Exit

EditTag levels\dlc\cex_headlong\fx\flame30fps.particle
SetField ParticleBillboardStyle CameraFacing
SetField AppearanceFlags RandomUMirror,IntensityAffectsAlpha,DepthFadeActive
SaveTagChanges
Exit

EditTag levels\dlc\cex_headlong\fx\flames_fall.particle
SetField ParticleBillboardStyle CameraFacing
SetField AppearanceFlags RandomUMirror,DepthFadeActive
SaveTagChanges
Exit

EditTag levels\multi\dlc\dlc_invasion\fx\particles\science_bolt.particle
SetField ParticleBillboardStyle ParallelToDirection
SetField AppearanceFlags RandomUMirror,RandomVMirror,BitmapAuthoredVertically
SaveTagChanges
Exit



EditTag levels\firefight\ff10_prototype\ff10_prototype.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\firefight\ff20_courtyard\ff20_courtyard.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\firefight\ff30_waterfront\ff30_waterfront.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\firefight\ff45_corvette\ff45_corvette.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\firefight\ff50_park\ff50_park.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\firefight\ff60_airview\ff60_airview.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\firefight\ff60_icecave\ff60_icecave.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

## Cut Content
EditTag levels\firefight\ff70_holdout\ff70_holdout.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\dlc\ff_unearthed\ff_unearthed.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

EditTag levels\dlc\cex_ff_halo\cex_ff_halo.scenario
SetField MapType Multiplayer
SetField CampaignId -1
SaveTagChanges
Exit

echo == GOLF CLUB ==
RunCommands "workingdir\cmds\golf_club.cmds"

echo == FORGE ==
RunCommands "workingdir\cmds\forge_object_ff_palette.cmds"
RunCommands "workingdir\cmds\forge_object_port.cmds"
RunCommands "workingdir\cmds\forge_object_palette.cmds"

echo == DUMPSTER HINGE FIX ==
EditTag objects\props\human\urban\dumpster\dumpster.physics_model
SetField LimitedHingeConstraints[0].LimitAngleBounds 0 -90
SaveTagChanges
Exit

echo == M20 ELEVATOR FIX ==
EditTag objects\levels\shared\m20_elevator_sm\m20_elevator_sm.device_machine
SetField ObjectFlags.Flags DoesNotCastShadow
SaveTagChanges
Exit

EditTag objects\levels\shared\m20_elevator_sm\m20_elevator_sm.model_animation_graph
SetField SoundReferences[2].Reference sound\device_machines\omaha\doors_lifts\m20_elevator_small\m20_elev_open_close\m20_elev_open.sound
SetField SoundReferences[3].Reference sound\device_machines\omaha\doors_lifts\m20_elevator_small\m20_elev_open_close\m20_elev_close.sound
AddAnimation workingdir\animations\m20_elevator
SetField Animations[0].AnimationData.DesiredCompression BestScore
SetField Animations[0].AnimationData.CurrentCompression BestScore
SetField Animations[0].AnimationData.NodeListChecksum -343606298
AddBlockElements Animations[0].AnimationData.SoundEvents 4

# Lol, absolutely noone will notice about the missing sound but eh
# If it can be fixed, then it will

# OPEN BOTTOM
SetField Animations[0].AnimationData.SoundEvents[0].Sound 2
SetField Animations[0].AnimationData.SoundEvents[0].Frame 2
SetField Animations[0].AnimationData.SoundEvents[0].MarkerName entry_audio

# CLOSE BOTTOM
SetField Animations[0].AnimationData.SoundEvents[1].Sound 1
SetField Animations[0].AnimationData.SoundEvents[1].Frame 0
SetField Animations[0].AnimationData.SoundEvents[1].MarkerName entry_audio

# OPEN TOP
SetField Animations[0].AnimationData.SoundEvents[2].Sound 0
SetField Animations[0].AnimationData.SoundEvents[2].Frame 13
SetField Animations[0].AnimationData.SoundEvents[2].MarkerName Exit_audio

# CLOSE TOP
SetField Animations[0].AnimationData.SoundEvents[3].Sound 3
SetField Animations[0].AnimationData.SoundEvents[3].Frame 15
SetField Animations[0].AnimationData.SoundEvents[3].MarkerName Exit_audio
SaveTagChanges
Exit

# Waterfront pumpjack animation fixup
EditTag objects\levels\solo\m30\pumpjack\pumpjack.model_animation_graph
SetField Animations[0].AnimationData.AnimationType Replacement
savetagchanges
exit

# Communication tower animation fixup
EditTag objects\props\human\pioneer\tech\com_a\com_a.model_animation_graph
SetField Animations[0].AnimationData.AnimationType Replacement
savetagchanges
exit


echo ==Remove damage from ported models==
EditTag objects\gear\human\military\camping_stool_mp\camping_stool_mp.model
RemoveBlockElements NewDamageInfo 0 1
SaveTagChanges
Exit

EditTag objects\equipment\health_pack\health_pack.model
RemoveBlockElements NewDamageInfo 0 1
SaveTagChanges
Exit

echo ==Fix Battle Canyon missing textures==
DuplicateTag levels\multi\deadlock\shaders\deadlock_grate_a.shader objects\cex\cex_beaver_creek\crates\gravity_lift\gravity_lift_grate
EditTag objects\cex\cex_beaver_creek\crates\gravity_lift\gravity_lift_grate.shader
SetArgument specular_coefficient 0.3
SaveTagChanges
Exit

EditTag objects\cex\cex_beaver_creek\crates\gravity_lift\gravity_lift.render_model
SetField Materials[0].RenderMethod objects\cex\cex_beaver_creek\crates\gravity_lift\gravity_lift_grate.shader
SaveTagChanges
Exit

EditTag objects\cex\cex_beaver_creek\crates\gravity_lift_blue\gravity_lift_blue.render_model
SetField Materials[0].RenderMethod objects\cex\cex_beaver_creek\crates\gravity_lift\gravity_lift_grate.shader
SaveTagChanges
Exit

# echo ==Fix reach magnum illum color...==
EditTag dw3\r3ach\objects\weapons\pistol\magnum\shaders\magnum_illum.shader
SetArgument self_illum_color 0.8 1.2 0.4 1
SaveTagChanges
Exit

# echo ==Add Reach specific weapons to the palette...==

EditTag multiplayer\forge_globals.forge_globals_definition

AddBlockElements Palette
SetField Palette[*].Name "CONCUSSION RIFLE"
SetField Palette[*].Type Weapon
SetField Palette[*].CategoryIndex 78
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon

AddBlockElements Palette
SetField Palette[*].Name "FOCUS RIFLE"
SetField Palette[*].Type Weapon
SetField Palette[*].CategoryIndex 78
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\weapons\rifle\focus_rifle\focus_rifle.weapon

AddBlockElements Palette
SetField Palette[*].Name "GRENADE LAUNCHER"
SetField Palette[*].Type Weapon
SetField Palette[*].CategoryIndex 78
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\weapons\rifle\grenade_launcher\grenade_launcher.weapon

AddBlockElements Palette
SetField Palette[*].Name "NEEDLE RIFLE"
SetField Palette[*].Type Weapon
SetField Palette[*].CategoryIndex 78
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\weapons\rifle\needle_rifle\needle_rifle.weapon

AddBlockElements Palette
SetField Palette[*].Name "PLASMA REPEATER"
SetField Palette[*].Type Weapon
SetField Palette[*].CategoryIndex 78
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\weapons\rifle\plasma_repeater\plasma_repeater.weapon

AddBlockElements Palette
SetField Palette[*].Name "PLASMA LAUNCHER"
SetField Palette[*].Type Weapon
SetField Palette[*].CategoryIndex 78
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\weapons\support_high\plasma_launcher\plasma_launcher.weapon

AddBlockElements Palette
SetField Palette[*].Name "TARGET LOCATOR"
SetField Palette[*].Type Weapon
SetField Palette[*].CategoryIndex 78
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\weapons\pistol\target_laser\target_laser.weapon

SaveTagChanges
Exit

echo ==Set weapon CHUDS to ramps from ramphud.pak==

EditTag objects\weapons\support_high\spartan_laser\spartan_laser.weapon
SetField HudInterface ui\chud\spartan_laser.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\support_high\rocket_launcher\rocket_launcher.weapon
SetField HudInterface ui\chud\rocket.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\support_high\plasma_launcher\plasma_launcher.weapon
SetField HudInterface ui\chud\plasma_launcher.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\support_high\flak_cannon\flak_cannon.weapon
SetField HudInterface ui\chud\fuel_rod_cannon.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\spike_rifle\spike_rifle.weapon
SetField HudInterface ui\chud\spike_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon
SetField HudInterface ui\chud\sniper_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\shotgun\shotgun.weapon
SetField HudInterface ui\chud\shotgun.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\plasma_rifle\plasma_rifle.weapon
SetField HudInterface ui\chud\plasma_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\plasma_repeater\plasma_repeater.weapon
SetField HudInterface ui\chud\plasma_repeater.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\needle_rifle\needle_rifle.weapon
SetField HudInterface ui\chud\needle_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\grenade_launcher\grenade_launcher.weapon
SetField HudInterface ui\chud\grenade_launcher.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\focus_rifle\focus_rifle.weapon
SetField HudInterface ui\chud\focus_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\dmr\dmr.weapon
SetField HudInterface ui\chud\dmr_ramp.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon
SetField HudInterface ui\chud\concussion_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\battle_rifle\battle_rifle.weapon
SetField HudInterface ui\chud\battle_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\rifle\assault_rifle\assault_rifle.weapon
SetField HudInterface ui\chud\assault_rifle.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\pistol\plasma_pistol\plasma_pistol.weapon
SetField HudInterface ui\chud\plasma_pistol.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\pistol\needler\needler.weapon
SetField HudInterface ui\chud\needler.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\pistol\magnum\magnum.weapon
SetField HudInterface ui\chud\magnum.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\melee\gravity_hammer\gravity_hammer.weapon
SetField HudInterface ui\chud\hammer.chud_definition
SaveTagChanges
Exit

EditTag objects\weapons\melee\energy_blade\energy_blade.weapon
SetField HudInterface ui\chud\sword.chud_definition
SaveTagChanges
Exit

echo ==Revenant and Falcon strings==
EditTag ui\hud\hud_messages.multilingual_unicode_string_list
SetString english revenant_enter_driver "\uE461\uE45F to drive Revenant"
SetString english revenant_enter_passenger "\uE461\uE45F to ride in Revenant"
SetString english revenant_board "\uE461\uE45F to board Revenant"
SaveTagChanges
Exit

EditTag ui\hud\hud_messages.multilingual_unicode_string_list
SetString english falcon_drive "\uE461\uE45F to drive Falcon"
SetString english falcon_enter_passenger "\uE461\uE45F to ride in Falcon"
SetString english falcon_board "\uE461\uE45F to board Falcon"
SetString english falcon_flip "\uE461\uE45F to flip Falcon"
SetString english falcon_enter_gunner "\uE461\uE45F to operate Falcon turret"
SaveTagChanges
Exit

# echo ==Add reach armor abilities to the palette...==

EditTag multiplayer\forge_globals.forge_globals_definition

AddBlockElements Palette
SetField Palette[*].Name "ARMOR LOCK"
SetField Palette[*].Type Equipment
SetField Palette[*].CategoryIndex 67
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\equipment\armor_lockup\armor_lockup.equipment

AddBlockElements Palette
SetField Palette[*].Name "DROP SHIELD"
SetField Palette[*].Type Equipment
SetField Palette[*].CategoryIndex 67
SetField Palette[*].DescriptionIndex -1
SetField Palette[*].Object objects\equipment\drop_shield\drop_shield.equipment

SaveTagChanges
Exit

echo ==Fix VISR mask==
EditTag shaders\default_bitmaps\bitmaps\vision_mode_mask.bitmap
ImportBitmap 0 workingdir\bitmaps\vision_mask.dds
SaveTagChanges
Exit

EditTag objects\characters\elite\mp_elite\bitmaps\vision_mode_mask.bitmap
ImportBitmap 0 workingdir\bitmaps\vision_mask.dds
SaveTagChanges
Exit

echo ==UI Sounds==
EditTag sound\game_sfx\ui\button_based_ui_sounds\a_button.sound
ImportSound workingdir\sounds\ui\a_button.mp3
SaveTagChanges
Exit

EditTag sound\game_sfx\ui\button_based_ui_sounds\b_button.sound
ImportSound workingdir\sounds\ui\b_button.mp3
SaveTagChanges
Exit

EditTag sound\game_sfx\ui\button_based_ui_sounds\cursor_horzontal.sound
ImportSound workingdir\sounds\ui\cursor_vertical.mp3
SaveTagChanges
Exit

EditTag sound\game_sfx\ui\button_based_ui_sounds\cursor_vertical.sound
ImportSound workingdir\sounds\ui\cursor_horizontal.mp3
SaveTagChanges
Exit

EditTag sound\game_sfx\ui\button_based_ui_sounds\x_button.sound
ImportSound workingdir\sounds\ui\y_button.mp3
SaveTagChanges
Exit

echo ==Fix Lobby Title Placements==
EditTag ui\halox\pregame_lobby\pregame_lobby_template_mapeditor.gui_group_widget_definition
SetField TextWidgets[0].Definition.GuiRenderBlock.Bounds720p 265 115 357 714
SaveTagChanges
Exit

DuplicateTag ui\halox\pregame_lobby\pregame_lobby_template_campaign.gui_group_widget_definition ui\halox\pregame_lobby\pregame_lobby_template_survival
EditTag ui\halox\pregame_lobby\pregame_lobby_template_survival.gui_group_widget_definition
SetField TextWidgets[0].Definition.GuiRenderBlock.Bounds720p 265 115 357 714
SaveTagChanges
Exit

EditTag ui\halox\pregame_lobby\pregame_lobby_survival.gui_screen_widget_definition
SetField GroupWidgets[0].TemplateReference ui\halox\pregame_lobby\pregame_lobby_template_survival.gui_group_widget_definition
SaveTagChanges
Exit

echo ==Fix Lobby Leader Text Placements==
EditTag ui\halox\pregame_lobby\pregame_lobby_template_multiplayer.gui_group_widget_definition
SetField TextWidgets[2].Definition.GuiRenderBlock.Bounds720p 20 115 350 704
SaveTagChanges
Exit

EditTag ui\halox\pregame_lobby\pregame_lobby_template_survival.gui_group_widget_definition
SetField TextWidgets[2].Definition.GuiRenderBlock.Bounds720p 20 115 350 704
SaveTagChanges
Exit

EditTag ui\halox\pregame_lobby\pregame_lobby_template_mapeditor.gui_group_widget_definition
SetField TextWidgets[5].Definition.GuiRenderBlock.Bounds720p 20 115 350 704
SaveTagChanges
Exit

echo ==Improve low gravity==
EditTag objects\levels\ca_dev\dlc_condemned\zero_g_field\zero_g_field.physics_model
SetField PhantomTypes[0].Flags.Halo3ODST NegatesGravity,IgnoresScenery
SetField PhantomTypes[0].DirectionAcceleration -1.5
SetField PhantomTypes[0].DirectionMaxVelocity 3
SaveTagChanges
Exit

EditTag objects\levels\multi\dlc\dlc_slayer\low_grav_space\low_grav_space.physics_model
SetField PhantomTypes[0].DirectionAcceleration -1.12
SetField PhantomTypes[0].DirectionMaxVelocity 5
SaveTagChanges
Exit

echo ==Decrease jump velocity to match reach (also low gravity related)==
EditTag objects\characters\masterchief\mp_masterchief\mp_masterchief.biped
SetField JumpVelocity 2.3
SetField MinimumSoftLandingVelocity 0.5
SetField MinimumHardLandingVelocity 5.25
SaveTagChanges
Exit

EditTag objects\characters\elite\mp_elite\mp_elite.biped
SetField JumpVelocity 2.3
SetField MinimumSoftLandingVelocity 0.5
SetField MinimumHardLandingVelocity 5.25
SaveTagChanges
Exit


echo ==Replace initial spawn points==
EditTag objects\multi\assault\assault_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges 
Exit

EditTag objects\multi\ctf\ctf_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges
Exit

EditTag objects\multi\infection\infection_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges
Exit

EditTag objects\multi\oddball\oddball_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges
Exit

EditTag objects\multi\slayer\slayer_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges
Exit

EditTag objects\multi\territories\territories_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges
Exit

EditTag objects\multi\vip\vip_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges
Exit

EditTag objects\multi\koth\koth_initial_spawn_point.scenery
SetField Model objects\multi\spawning\ff_respawn_point\ff_respawn_point.model
SaveTagChanges
Exit

echo ==Replace kill volume model==
EditTag objects\multi\boundaries\kill_volume.crate
SetField Model objects\multi\models\ff_kill_zone\ff_kill_zone.model
SaveTagChanges
Exit

echo ==Replace FF respawn zone boundry==
EditTag objects\multi\firefight\firefight_respawn_zone.scenery
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

echo ==Apply noble six voice pak==

OpenModPackage "workingdir\paks\Noble_Six_Voice_Pack.pak"
ApplyModPackage
ExitModPackage

echo ==Apply 1999 emotes pak==
OpenModPackage "workingdir\paks\1999_Emotes v1_5 CUSTOM.pak"
ApplyModPackage
ExitModPackage


EditTag objects\vehicles\falcon\player_animations\player_animations.model_animation_graph
SortModes
SaveTagChanges
Exit

EditTag objects\characters\masterchief\masterchief.model_animation_graph
SortModes
SaveTagChanges
Exit

EditTag objects\characters\elite\elite.model_animation_graph
SortModes
SaveTagChanges
Exit

EditTag objects\characters\dervish\dervish.model_animation_graph
SortModes
SaveTagChanges
Exit

echo ==Apply Spawn Points==
OpenModPackage "workingdir\paks\InitialSpawns.pak"
ApplyModPackage
ExitModPackage

echo ==Fix Shield Crash==
EditTag objects\characters\jackal\fx\_particles\plasma_noise.particle
SetField RenderMethod.ShaderProperties[0].TextureConstants[0].Bitmap fx\bitmaps\material\impact_spray_large.bitmap
SetField RenderMethod.ShaderProperties[0].TextureConstants[2].Bitmap fx\bitmaps\material\impact_spray_large.bitmap
SaveTagChanges
Exit


echo ==Spartan Weapons Animation==
RunCommands "workingdir\cmds\spartan_animations.cmds"
RunCommands "workingdir\cmds\spartan_rendermodel.cmds"

echo ==Elite Weapons Animation==
RunCommands "workingdir\cmds\elite_animations.cmds"
RunCommands "workingdir\cmds\elite_rendermodel.cmds"

echo ==CHDT Weapons==
RunCommands "workingdir\cmds\CHDTpart1.cmds"
RunCommands "workingdir\cmds\CHDTpart2.cmds"
RunCommands "workingdir\cmds\CHDTpart3.cmds"

echo ==Shader Fixes==
RunCommands "workingdir\cmds\shaderfixes.cmds"

echo ==Third person animations==
RunCommands "workingdir\cmds\3Panimations.cmds"

echo ==Prevent vehicles being succed by golf cup==
EditTag objects\levels\shared\golf_cup\golf_cup.physics_model
SetField PhantomTypes[0].Flags.Halo3ODST IgnoresPlayers,IgnoresBipeds,IgnoresVehicles,IgnoresWeapons,IgnoresEquipment,IgnoresProjectiles,IgnoresScenery,IgnoresMachines,IgnoresControls,IgnoresSoundScenery,IgnoresCreatures,IgnoresGiants,IgnoresEffectScenery
SaveTagChanges
Exit

echo ==Fix Health Pack==
EditTag objects\characters\masterchief\mp_masterchief\mp_masterchief.biped
SetField RevivingEquipment[0].Instance objects\powerups\health_pack\health_pack_large.equipment
SaveTagChanges
Exit
EditTag objects\characters\elite\mp_elite\mp_elite.biped
SetField RevivingEquipment[0].Instance objects\powerups\health_pack\health_pack_large.equipment
SaveTagChanges
Exit

EditTag objects\equipment\health_pack\shaders\health_pack.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_0_1_0_1_2_5_1_0_0_4_0_0.render_method_template
SaveTagChanges
Exit
EditTag objects\equipment\health_pack\shaders\health_pack_rubber.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_0_2_0_1_10_0_0_0_0_4_0_0.render_method_template
SaveTagChanges
Exit

EditTag objects\powerups\health_pack\health_pack_large.equipment
SetField MultiplayerObject[0].SpawnTimerType StartsOnDisturbance
SetField MultiplayerObject[0].DefaultSpawnTime 15
SetField MultiplayerObject[0].DefaultAbandonTime 60
SaveTagChanges
Exit

echo ==Switch needler projectile==
EditTag objects\weapons\pistol\needler\needler.weapon
SetField Barrels[0].Projectile objects\weapons\pistol\needler\projectiles\needler_shard\needler_shard.projectile
SaveTagChanges
Exit


RunCommands "workingdir\cmds\worldbounds.cmds"

echo ==Teleporters Fix==
EditTag objects\ca_dev\dlc_preserve\crates\teleporter_sender\teleporter_2way.crate
SetField MultiplayerObject[0].Type TeleporterTwoWay
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

EditTag objects\ca_dev\dlc_preserve\crates\teleporter_receiver\teleporter_receiver.crate
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

EditTag objects\ca_dev\dlc_preserve\crates\teleporter_sender\teleporter_sender.crate
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

EditTag objects\levels\forge\ff_teleporter_2_way\ff_teleporter_2_way.crate
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

EditTag objects\levels\forge\ff_teleporter_receiver\ff_teleporter_receiver.crate
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

EditTag objects\levels\forge\ff_teleporter_sender\ff_teleporter_sender.crate
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

EditTag objects\multi\2way_teleporter\2way_teleporter.crate
SetField MultiplayerObject[0].Type TeleporterTwoWay
SetField MultiplayerObject[0].BoundaryShaders[0].StandardShader objects\multi\shaders\multiplayer_object_plasma.shader
SetField MultiplayerObject[0].BoundaryShaders[0].OpaqueShader objects\multi\shaders\multiplayer_object_plasma.shader
SaveTagChanges
Exit

EditTag objects\levels\forge\ff_teleporter_2_way\ff_teleporter_2_way.physics_model
SetField RigidBodies[0].MotionType Keyframed
SaveTagChanges
Exit

EditTag objects\levels\forge\ff_teleporter_receiver\ff_teleporter_receiver.physics_model
SetField RigidBodies[0].MotionType Keyframed
SaveTagChanges
Exit

EditTag objects\ca_dev\dlc_preserve\crates\teleporter_sender\teleporter_sender.physics_model
SetField RigidBodies[0].MotionType Keyframed
SaveTagChanges
Exit

EditTag objects\ca_dev\dlc_preserve\crates\teleporter_receiver\teleporter_receiver.physics_model
SetField RigidBodies[0].MotionType Keyframed
SaveTagChanges
Exit

echo ==Weapons Viewmodel Support==
RunCommands "workingdir\cmds\weapons_viewmodel.cmds"

echo ==Tempest Skybox Fix==
EditTag levels\multi\dlc\dlc_medium\dlc_medium_beachhead_sky\shaders\dlc_medium_blue_sky_dome.shader
SetField RenderFlags None
SaveTagChanges
Exit

echo ==Tempest water fix==
EditTag fx\bitmaps\liquid\fluid_foam_medium.bitmap
ImportBitmap 0 "workingdir\bitmaps\fluid_foam_medium.dds"
SaveTagChanges
Exit
EditTag fx\bitmaps\liquid\fluid_spray_medium.bitmap
ImportBitmap 0 "workingdir\bitmaps\fluid_spray_medium.dds"
SaveTagChanges
Exit
EditTag fx\bitmaps\flash\energy_impact_flash.bitmap
ImportBitmap 0 "workingdir\bitmaps\energy_impact_flash.dds"
SaveTagChanges
Exit
EditTag fx\bitmaps\material\impact_burst_medium.bitmap
ImportBitmap 0 "workingdir\bitmaps\impact_burst_medium.dds"
SaveTagChanges
Exit
EditTag fx\bitmaps\material\impact_chunks_small.bitmap
ImportBitmap 0 "workingdir\bitmaps\impact_chunks_small.dds"
SaveTagChanges
Exit

echo ==Forge World more accurate skybox fog==
EditTag levels\multi\forge_halo\forge_halo.sky_atm_parameters
SetField AtmosphereSettings[0].Color 0.4520674 0.7947002 1.226353
SetField AtmosphereSettings[0].Intensity 2
SetField AtmosphereSettings[0].RayleighMultiplier 0
SetField AtmosphereSettings[0].MieMultiplier 0
SetField AtmosphereSettings[0].MaxFogThickness 10000
SaveTagChanges
Exit

EditTag levels\multi\forge_halo\sky_halo\shaders\sky_halo_ring.shader
SetField ShaderProperties[0].RealConstants[3].Values 1 1.2 1.5 1
SetField RenderFlags None
SaveTagChanges
Exit

Echo ==Forge World brighter exposure==
EditTag levels\multi\forge_halo\post_fx\forge_halo.area_screen_effect
SetField ScreenEffects[0].ExposureBoost 0.6
SaveTagChanges
Exit

Echo ==Installation 04 brighter exposure==
EditTag levels\dlc\cex_ff_halo\post_fx\cex_halo.area_screen_effect
SetField ScreenEffects[0].ExposureBoost 0.2
SetField ScreenEffects[0].GammaEnhance 0
SetField ScreenEffects[0].ColorFloor 0 0 0
SaveTagChanges
Exit

echo ==Overlook fog fix==
# at least it's no longer blue, still inaccurate tho

EditTag levels\firefight\ff10_prototype\ff10_prototype.sky_atm_parameters
setfield AtmosphereSettings[0].Flags EnableAtmosphere,PatchyFog
setfield AtmosphereSettings[0].SeaLevel 5000
SetField AtmosphereSettings[0].MaxFogThickness 150
setfield AtmosphereSettings[0].Color 0.5775805 0.838799 0.8879231
setfield AtmosphereSettings[0].Intensity 0.1
setfield AtmosphereSettings[0].DistanceBias -10
SaveTagChanges
Exit

echo --Spire fog fixup--
edittag levels\multi\35_island\35_island.sky_atm_parameters
setfield AtmosphereSettings[0].Color 0.4862745 0.7974836 1
savetagchanges
exit

echo --Spire mountain fog fix==
EditTag levels\solo\m35\sky_daytime\shaders\mountains_cutout.shader
SetField RenderFlags None
SaveTagChanges
Exit
EditTag levels\solo\m35\sky_daytime\shaders\very_distant_mountains.shader
SetField RenderFlags None
SaveTagChanges
Exit

echo ==Outpost fog fix==
# at least it's no longer blue, still inaccurate tho
# fix vertex explosion

EditTag levels\firefight\ff60_airview\ff60_airview.sky_atm_parameters
SetField AtmosphereSettings[0].Color 0.1 0.059 0.036
SetField AtmosphereSettings[0].MaxFogThickness 100
setfield TransparentSortLayer PrePass
setfield TransparentSortDistance 100
SaveTagChanges
Exit

echo ==Glacier vertex explosion fix==
edittag levels\firefight\ff60_icecave\ff60_icecave.sky_atm_parameters
setfield TransparentSortLayer PrePass
setfield TransparentSortDistance 100
savetagchanges
exit

echo ==Waterfront vertex explosion fix==
edittag levels\firefight\ff30_waterfront\ff30_waterfront.sky_atm_parameters
setfield TransparentSortLayer PrePass
setfield TransparentSortDistance 100
savetagchanges
exit

echo ==Make frag and plasma grenades explode with precision weapons==
EditTag objects\weapons\grenade\frag_grenade\frag_grenade_equipment.model
SetField NewDamageInfo[0].DamageSections[1].InstantResponses[1].CustomResponseLabel headshot
SaveTagChanges
Exit
EditTag objects\weapons\grenade\plasma_grenade\plasma_grenade_equipment.model
SetField NewDamageInfo[0].DamageSections[1].InstantResponses[1].CustomResponseLabel headshot
SaveTagChanges
Exit

echo ==Fix grenade child objects on grenade case==
EditTag objects\gear\human\military\h_grenade_crate\h_grenade_crate.model
SetField Variants[1].Objects[0].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[1].Objects[1].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[2].Objects[0].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[2].Objects[1].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[2].Objects[2].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[2].Objects[3].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[3].Objects[0].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[3].Objects[1].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[3].Objects[2].ChildObject objects\weapons\grenade\frag_grenade\frag_grenade.equipment
SetField Variants[4].Objects[0].ChildObject objects\weapons\grenade\firebomb_grenade\firebomb_grenade.equipment
SetField Variants[4].Objects[1].ChildObject objects\weapons\grenade\firebomb_grenade\firebomb_grenade.equipment
SetField Variants[4].Objects[2].ChildObject objects\weapons\grenade\firebomb_grenade\firebomb_grenade.equipment
SetField Variants[4].Objects[3].ChildObject objects\weapons\grenade\firebomb_grenade\firebomb_grenade.equipment
SetField Variants[5].Objects[0].ChildObject objects\weapons\grenade\plasma_grenade\plasma_grenade.equipment
SetField Variants[5].Objects[1].ChildObject objects\weapons\grenade\plasma_grenade\plasma_grenade.equipment
SetField Variants[5].Objects[2].ChildObject objects\weapons\grenade\plasma_grenade\plasma_grenade.equipment
SetField Variants[5].Objects[3].ChildObject objects\weapons\grenade\plasma_grenade\plasma_grenade.equipment
SaveTagChanges
Exit

EditTag objects\gear\human\military\h_grenade_crate\h_grenade_crate.render_model
SetField MarkerGroups[0].Markers[0].Translation 0.10253315 -0.050892994 0.047883064
SetField MarkerGroups[1].Markers[0].Translation 0.034779035 -0.050892994 0.047883064
SetField MarkerGroups[2].Markers[0].Translation -0.033184297 -0.050892994 0.047883064
SetField MarkerGroups[3].Markers[0].Translation -0.10105807 -0.050892994 0.047883064
SaveTagChanges
Exit

echo ==Mangum Crosshair fix==
EditTag objects\weapons\pistol\magnum\magnum.weapon
SetField Barrels[0].ProjectileMinimumError 0.05
SetField Barrels[0].ProjectileErrorAngle 0.15 1
SetField Barrels[0].FiringError.AccelerationTime 0
SetField Barrels[0].FiringError.DecelerationTime 0
SetField Barrels[0].VerticalRecoil.AngleChangeAccelerationRate 1000
SetField Barrels[0].VerticalRecoil.AngleChangeDecelerationRate 1000
SetField Barrels[0].EjectionPortRecoveryRate 1000
SetField Barrels[0].RateOfFireAccelerationTime 1000
SetField Barrels[0].RateOfFireDecelerationTime 1000
SetField Barrels[0].ErrorAccelerationRate 1000
SetField Barrels[0].ErrorDecelerationRate 2.5
SetField Barrels[0].VerticalRecoil.AngleChangePerShot 0 0
SetField Barrels[0].DualWeaponError.RuntimeDecelerationRate 1000
SetField Barrels[0].DualWeaponError.RuntimeAccelerationRate 1000
SaveTagChanges
Exit

echo ==DMR Crosshair fix==
EditTag objects\weapons\rifle\dmr\dmr.weapon
SetField Barrels[0].FiringError.AccelerationTime 0.5
SetField Barrels[0].FiringError.DecelerationTime 0.65
SetField Barrels[0].DualWeaponError.RuntimeDecelerationRate 1.428571
SetField Barrels[0].DualWeaponError.RuntimeAccelerationRate 1000
SetField Barrels[0].DualWeaponError.DecelerationTime 0.7
SetField Barrels[0].ProjectileMinimumError 0.15
SetField Barrels[0].ProjectileErrorAngle 0.15 0.65
SetField Barrels[0].AccuracyPenalties.ReloadPenalty 2.4
SetField Barrels[0].AccuracyPenalties.SwitchPenalty 1
SetField Barrels[0].VerticalRecoil.AngleChangeAccelerationRate 1000
SetField Barrels[0].VerticalRecoil.AngleChangeDecelerationRate 1000
SetField Barrels[0].EjectionPortRecoveryRate 1000
SetField Barrels[0].RateOfFireAccelerationTime 1000
SetField Barrels[0].RateOfFireDecelerationTime 1000
SetField Barrels[0].ErrorAccelerationRate 2
SetField Barrels[0].ErrorDecelerationRate 1.538462
SetField Barrels[0].VerticalRecoil.AngleChangePerShot 0 0
SetField Barrels[0].DamageReportingType.HaloOnline Carbine
AddBlockElements Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringPenaltyFunction
SetField Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringPenaltyFunction[0].Function.Data 08340000000000000000803F00000000000000006F12833A6F12033B2400000002000000040000CD0AD7233EB9DE9F3F3333333F04000000FFFF7F7F881069BF0AD3853F
AddBlockElements Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringCrouchedPenaltyFunction
SetField Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringCrouchedPenaltyFunction[0].Function.Data 08340000000000000000803F00000000000000006F12833A6F12033B2400000002000000040000CDC3F5283ECC261B3F4444043F04000000FFFF7F7FCCA413BF573A363F
SaveTagChanges
Exit


echo ==Revenant projectile swap==
EditTag objects\vehicles\covenant\revenant\turrets\revenant_plasma_mortar\revenant_plasma_mortar.weapon
SetField Barrels[0].Projectile objects\vehicles\covenant\revenant\turrets\revenant_plasma_turret\weapon\revenant_plasma_turret.projectile
SaveTagChanges
Exit

EditTag objects\vehicles\covenant\revenant\turrets\revenant_plasma_mortar\revenant_plasma_mortar.weapon
SetField WeaponFlags.NewFlags SecondaryTriggerOverridesGrenades,CannotFireWhileBoosting
SaveTagChanges
Exit

echo ==Revenant HUD==
EditTag objects\vehicles\covenant\revenant\revenant.vehicle
SetField HudInterfaces[0].UnitHudInterface ui\chud\v_revenant.chud_definition
SaveTagChanges
Exit

EditTag ui\chud\v_revenant.chud_definition
SetField HudWidgets[0].BitmapWidgets[0].Bitmap ms30\ui\chud\bitmaps\hud_revenant_reticle.bitmap
SaveTagChanges
Exit

echo ==Revenant engine low sound==
# Up the gain by 10, so -10 become 0 and -14 become -4
EditTag sound\vehicles\spectre\spectre_boost_l\spectre_boost_l.sound_looping
SetField Tracks[0].Gain 0
SaveTagChanges
Exit

EditTag sound\vehicles\spectre\spectre_boost_r\spectre_boost_r.sound_looping
SetField Tracks[0].Gain 0
SaveTagChanges
Exit

EditTag sound\vehicles\revenant\revenant_engine_left\revenant_engine_left.sound_looping
SetField Tracks[0].Gain -4
SaveTagChanges
Exit

EditTag sound\vehicles\revenant\revenant_engine_right\revenant_engine_right.sound_looping
SetField Tracks[0].Gain -4
SaveTagChanges
Exit

EditTag sound\vehicles\revenant\revenant_lod\revenant_lod.sound_looping
SetField Tracks[0].Gain -7
SaveTagChanges
Exit

echo ==Grenade launcher explosion sound fix==
EditTag dw3\r3ach\objects\weapons\rifle\grenade_launcher\projectiles\primary\detonation.effect
SetField Events[0].Parts[0].Type dw3\r3ach\sound\weapons\grenade_launcher\grenade_launcher_expl.sound
SaveTagChanges
Exit

EditTag dw3\r3ach\objects\weapons\rifle\grenade_launcher\projectiles\secondary\detonation.effect
SetField Events[0].Parts[0].Type dw3\r3ach\sound\weapons\grenade_launcher\grenade_launcher_expl.sound
SaveTagChanges
Exit

echo ==Make weapons not float like in reach==
ForEach weap contains: objects\weapons SetField WaterDensity None

# echo ==Podium/Prematch Camera...==
RunCommands "workingdir\cmds\podiumcamera.cmds"

# echo ==Copy 0.7 NewDamageInfo for fusion coil and plasma battery...==
RunCommands "workingdir\cmds\fusion_coil_plasma_battery_damage.cmds"

# echo ==Fix Holograms...==
RunCommands "workingdir\cmds\fixholograms.cmds"

# echo ==Character Model Improvements...==
EditTag objects\characters\elite\mp_elite\mp_elite.render_model
ReplaceRenderGeometry "workingdir\models\ramp_dino.dae" TriangleStrip
SaveTagChanges
Exit

EditTag objects\characters\elite\mp_elite\fp_body\fp_body.render_model
ReplaceRenderGeometry "workingdir\models\ramp_elite_fp_body.dae" TriangleStrip
SaveTagChanges
Exit

##EditTag objects\characters\masterchief\mp_masterchief\mp_masterchief.render_model
##ReplaceRenderGeometry "workingdir\models\spartan.fbx" TriangleStrip
##SaveTagChanges
##Exit

##EditTag objects\characters\masterchief\mp_masterchief\fp_body\fp_body.render_model
##ReplaceRenderGeometry "workingdir\models\spartan_fp_body.fbx" TriangleStrip
##SaveTagChanges
##Exit

##EditTag objects\characters\masterchief\mp_masterchief\fp\fp.render_model
##ReplaceRenderGeometry "workingdir\models\spartan_fp_arms.dae" TriangleStrip
##SaveTagChanges
##Exit

# echo ==Fix Covenant Portable Shield==
RunCommands "workingdir\cmds\portableshieldfix.cmds"

# echo ==Fix Kill Volume Physics==
EditTag objects\multi\models\ff_kill_zone\ff_kill_zone.physics_model
SetField RigidBodies[0].MotionType Keyframed
SaveTagChanges
Exit

# echo ==Map fog effect issue fix==
# Smoke balls on courtyard BEGONE
EditTag levels\firefight\ff20_courtyard\ff20_courtyard.scenario
RemoveBlockElements EffectScenery 52 5
SaveTagChanges
Exit

# Technically the fog is supposed to be there, but I think reach effect can be scaled or smth
EditTag levels\dlc\cex_timberland\cex_timberland.scenario
RemoveBlockElements EffectScenery 59 4
SaveTagChanges
Exit

# echo ==Map sound scenery issue fix==
RunCommands "workingdir\cmds\soundsceneryscenario.cmds"


# echo ==Zealot Low Gravity Collision Fix==
EditTag objects\levels\multi\45_aftship\zero_g_field\zero_g_field.physics_model
# GOD BLESS DEEPSEEK
# LITERALLY BETTER THAN CHATGPT

RemoveBlockElements Boxes 0 *
AddBlockElements Polyhedra 1

SetField Polyhedra[0].Name $_physics
SetField Polyhedra[0].MaterialIndex 0
SetField Polyhedra[0].RuntimeMaterialType 0
SetField Polyhedra[0].RelativeMassScale 1
SetField Polyhedra[0].Friction 0.9
SetField Polyhedra[0].Restitution 0.2
SetField Polyhedra[0].Volume 24000
SetField Polyhedra[0].Mass 60000000
SetField Polyhedra[0].MassDistributionIndex 0
SetField Polyhedra[0].PhantomIndex 0
SetField Polyhedra[0].ProxyCollisionGroup -1
SetField Polyhedra[0].ShapeBase.Size 0
SetField Polyhedra[0].ShapeBase.Count 128
# SetField Polyhedra[0].ShapeBase.Userdata 0x20
SetField Polyhedra[0].ShapeBase.ShapeType 6
SetField Polyhedra[0].ShapeBase.Radius 0.0164
SetField Polyhedra[0].AabbHalfExtents 19.9836 19.9836 7.4836
SetField Polyhedra[0].AabbHalfExtentsRadius 0
SetField Polyhedra[0].AabbCenter 0 0 7.5
SetField Polyhedra[0].AabbCenterRadius 0
SetField Polyhedra[0].FourVectorsSize 4
SetField Polyhedra[0].FourVectorsCapacity 2147483652
SetField Polyhedra[0].NumVertices 8
SetField Polyhedra[0].PlaneEquationsSize 6
SetField Polyhedra[0].PlaneEquationsCapacity 2147483654
SetField Polyhedra[0].Connectivity 0

AddBlockElements PolyhedronFourVectors 4
SetField PolyhedronFourVectors[0].FourVectorsX -19.9836 19.9836 -19.9836
SetField PolyhedronFourVectors[0].FourVectorsXW 19.9836
SetField PolyhedronFourVectors[0].FourVectorsY -19.9836 -19.9836 19.9836
SetField PolyhedronFourVectors[0].FourVectorsYW 19.9836
SetField PolyhedronFourVectors[0].FourVectorsZ -7.4836 -7.4836 -7.4836
SetField PolyhedronFourVectors[0].FourVectorsZW 7.4836

SetField PolyhedronFourVectors[1].FourVectorsX -19.9836 19.9836 -19.9836
SetField PolyhedronFourVectors[1].FourVectorsXW 19.9836
SetField PolyhedronFourVectors[1].FourVectorsY -19.9836 -19.9836 19.9836
SetField PolyhedronFourVectors[1].FourVectorsYW 19.9836
SetField PolyhedronFourVectors[1].FourVectorsZ 7.4836 7.4836 7.4836
SetField PolyhedronFourVectors[1].FourVectorsZW -7.4836

SetField PolyhedronFourVectors[2].FourVectorsX -19.9836 -19.9836 -19.9836
SetField PolyhedronFourVectors[2].FourVectorsXW -19.9836
SetField PolyhedronFourVectors[2].FourVectorsY 19.9836 19.9836 19.9836
SetField PolyhedronFourVectors[2].FourVectorsYW 19.9836
SetField PolyhedronFourVectors[2].FourVectorsZ -7.4836 7.4836 -7.4836
SetField PolyhedronFourVectors[2].FourVectorsZW 7.4836

SetField PolyhedronFourVectors[3].FourVectorsX 19.9836 19.9836 19.9836
SetField PolyhedronFourVectors[3].FourVectorsXW 19.9836
SetField PolyhedronFourVectors[3].FourVectorsY -19.9836 -19.9836 -19.9836
SetField PolyhedronFourVectors[3].FourVectorsYW -19.9836
SetField PolyhedronFourVectors[3].FourVectorsZ -7.4836 7.4836 -7.4836
SetField PolyhedronFourVectors[3].FourVectorsZW 7.4836

AddBlockElements PolyhedronPlaneEquations 6
SetField PolyhedronPlaneEquations[0].PlaneEquation 1 0 0 -19.9836
SetField PolyhedronPlaneEquations[1].PlaneEquation -1 0 0 -19.9836
SetField PolyhedronPlaneEquations[2].PlaneEquation 0 1 0 -19.9836
SetField PolyhedronPlaneEquations[3].PlaneEquation 0 -1 0 -19.9836
SetField PolyhedronPlaneEquations[4].PlaneEquation 0 0 1 -7.4836
SetField PolyhedronPlaneEquations[5].PlaneEquation 0 0 -1 -7.4836

SetField Phantoms[0].ShapeType Polyhedron
SaveTagChanges
Exit

# echo ==Weapons Multiplayer Globals==
# Fiesta now should work
EditTag multiplayer\multiplayer_globals.multiplayer_globals
# Add 10
RemoveBlockElements Universal[0].GameVariantWeapons 71 *

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name mgt_jorge
SetField Universal[0].GameVariantWeapons[*].RandomChance 0
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\turret\machinegun_turret_jorge\machinegun_turret_jorge.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name automag
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\pistol\automag\automag.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name smg_silenced
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\rifle\smg_silenced\smg_silenced.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name concussion_rifle
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name focus_rifle
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\rifle\focus_rifle\focus_rifle.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name grenade_launcher
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\rifle\grenade_launcher\grenade_launcher.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name needle_rifle
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\rifle\needle_rifle\needle_rifle.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name plasma_repeater
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\rifle\plasma_repeater\plasma_repeater.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name plasma_launcher
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\support_high\plasma_launcher\plasma_launcher.weapon

AddBlockElements Universal[0].GameVariantWeapons 1
SetField Universal[0].GameVariantWeapons[*].Name target_laser
SetField Universal[0].GameVariantWeapons[*].RandomChance 0.1
SetField Universal[0].GameVariantWeapons[*].Weapon objects\weapons\pistol\target_laser\target_laser.weapon
SaveTagChanges
Exit

# echo ==Make grenades not have a mind of their own==
EditTag objects\weapons\grenade\frag_grenade\frag_grenade.physics_model
SetField RigidBodies[0].LinearDampening 1
SetField RigidBodies[0].AngularDampening 1
SaveTagChanges
Exit
EditTag objects\weapons\grenade\plasma_grenade\plasma_grenade.physics_model
SetField RigidBodies[0].LinearDampening 1
SetField RigidBodies[0].AngularDampening 0.5
SaveTagChanges
Exit

# echo ==Make player movement & sprint more accurate to reach==
EditTag globals\globals.globals
SetField PlayerControl[0].SprintFullSpeedMultiplier 0.623
SetField PlayerControl[0].SprintPeggedMagnitude 0.85
SetField PlayerControl[0].SprintPeggedAngularThreshold 10
SetField PlayerInformation[0].RunForward 2.2
SetField PlayerInformation[0].RunBackward 1.98
SetField PlayerInformation[0].RunSideways 1.98
SetField PlayerInformation[0].RunAcceleration 8.5
SetField PlayerInformation[0].SneakBackward 0.81
SetField PlayerInformation[0].SneakSideways 0.81
SetField PlayerInformation[0].SneakAcceleration 6.1

SetField PlayerControl[1].SprintFullSpeedMultiplier 0.623
SetField PlayerControl[1].SprintPeggedMagnitude 0.85
SetField PlayerControl[1].SprintPeggedAngularThreshold 10
SetField PlayerInformation[1].RunForward 2.2
SetField PlayerInformation[1].RunBackward 1.98
SetField PlayerInformation[1].RunSideways 1.98
SetField PlayerInformation[1].RunAcceleration 8.5
SetField PlayerInformation[1].SneakBackward 0.81
SetField PlayerInformation[1].SneakSideways 0.81
SetField PlayerInformation[1].SneakAcceleration 6.1
SaveTagChanges
Exit

# echo == Fix needle rifle supercombine effect==
EditTag dw3\r3ach\objects\weapons\rifle\needle_rifle\projectiles\needle_rifle_shard.projectile
SetField AirborneDetonationEffect objects\weapons\pistol\needler\fx\airborne_detonation.effect
SetField GroundDetonationEffect objects\weapons\pistol\needler\fx\detonation.effect
SaveTagChanges
Exit

# echo == Set scorpion projectile to base ED==
EditTag objects\vehicles\scorpion\turrets\cannon\weapon\cannon_turret.weapon
SetField Barrels[0].Projectile objects\vehicles\scorpion\turrets\cannon\weapon\tank_shell.projectile
SaveTagChanges
Exit

# echo ==Fix weapon icons and strings==
RunCommands workingdir\cmds\weapon_strings.cmds

# == Automag and Silenced SMG Animations==
RunCommands "workingdir\cmds\odstweapsanimations.cmds"

# echo ==Add shield break sfx==
EditTag objects\characters\masterchief\fx\shield\shield_collapse.effect
AddBlockElements Events[0].Parts
SetField Events[0].Parts[3].SecondaryLocation -1
SetField Events[0].Parts[3].RuntimeBaseGroupTag snd!
SetField Events[0].Parts[3].Type sound\characters\spartan\shield_pop_spartan.sound
SaveTagChanges
Exit

EditTag objects\characters\elite\fx\shield\shield_collapse.effect
AddBlockElements Events[0].Parts
SetField Events[0].Parts[3].SecondaryLocation -1
SetField Events[0].Parts[3].RuntimeBaseGroupTag snd!
SetField Events[0].Parts[3].Type sound\characters\elite\shield_pop_elite.sound
SaveTagChanges
Exit

# echo ==Add warning text when spartan shields are down==
EditTag ui\hud\hud_messages.multilingual_unicode_string_list
SetString english shield_warning "WARNING"
SaveTagChanges
Exit

DuplicateTag ui\chud\animations\warning_flash.chud_animation_definition ui\chud\animations\warning_flash_ramp
EditTag ui\chud\animations\warning_flash_ramp.chud_animation_definition
SetField RuntimePeriodMsec 150
RemoveBlockElements Alpha[0].Keyframes 0 3
RemoveBlockElements Flash[0].Keyframes 0 3
SetField Alpha[0].Keyframes[0].TimeOffset 0
SetField Alpha[0].Keyframes[0].ScalarValue 0
SetField Alpha[0].Keyframes[1].TimeOffset 150
SetField Alpha[0].Keyframes[1].ScalarValue 1
SetField Flash[0].Keyframes[0].TimeOffset 0
SetField Flash[0].Keyframes[0].ScalarValue 0
SetField Flash[0].Keyframes[1].TimeOffset 150
SetField Flash[0].Keyframes[1].ScalarValue 1
SaveTagChanges
Exit

EditTag ui\chud\spartan.chud_definition
AddBlockElements HudWidgets[0].TextWidgets
AddBlockElements HudWidgets[0].TextWidgets[0].RenderData
AddBlockElements HudWidgets[0].TextWidgets[0].PlacementData
AddBlockElements HudWidgets[0].TextWidgets[0].RenderData
AddBlockElements HudWidgets[0].TextWidgets[0].AnimationData
AddBlockElements HudWidgets[0].TextWidgets[0].StateData
SetField HudWidgets[0].TextWidgets[0].InputString shield_warning
SetField HudWidgets[0].TextWidgets[0].Name shield_warning
SetField HudWidgets[0].TextWidgets[0].Font MainMenuFont
SetField HudWidgets[0].TextWidgets[0].PlacementData[0].Anchor Parent
SetField HudWidgets[0].TextWidgets[0].PlacementData[0].Scale 1 0.8
SetField HudWidgets[0].TextWidgets[0].PlacementData[0].Origin 0 0.8
SetField HudWidgets[0].TextWidgets[0].StateData[0].UnitMiscState ShieldAvailable
SetField HudWidgets[0].TextWidgets[0].StateData[0].NonWeaponFlashHO ShieldCritical
SetField HudWidgets[0].TextWidgets[0].AnimationData[0].Active.Animation ui\chud\animations\invisible.chud_animation_definition
SetField HudWidgets[0].TextWidgets[0].AnimationData[0].Flashing.Animation ui\chud\animations\warning_flash_ramp.chud_animation_definition
SetField HudWidgets[0].TextWidgets[0].RenderData[0].LocalColorA 0 255 94 94
SaveTagChanges
Exit

# echo ==Improve shield bar color accuracy==
EditTag ui\chud\spartan.chud_definition
SetField HudWidgets[0].BitmapWidgets[2].RenderData[0].OutputColorA HighlightForeground
SetField HudWidgets[26].BitmapWidgets[0].RenderData[0].OutputColorA HighlightForeground
SetField HudWidgets[0].BitmapWidgets[1].RenderData[0].ShaderType MeterGradient
SetField HudWidgets[0].BitmapWidgets[1].RenderData[0].LocalColorC 255 137 253 255
SetField HudWidgets[0].BitmapWidgets[1].RenderData[0].OutputColorA LocalC
SaveTagChanges
Exit

# echo ==Fix hud message/sprint overlap, and forge hud on non 16:9 aspect ratio==
EditTag ui\chud\globals.chud_globals_definition
SetField HudGlobals[0].HudAttributes[0].MessageOffset 0 0.68
SetField HudGlobals[0].HudAttributes[0].SurvivalMedalsOffset 0 0.62
SetField HudGlobals[2].HudAttributes[0].ResolutionFlags _720pFullscreen,_480iFullscreen
SaveTagChanges
Exit
EditTag objects\characters\elite\mp_elite\chud\globals.chud_globals_definition
SetField HudGlobals[0].HudAttributes[0].MessageOffset 0 0.68
SetField HudGlobals[0].HudAttributes[0].SurvivalMedalsOffset 0 0.62
SaveTagChanges
Exit

#echo ==Fix Objective Arming Meter==

OpenCacheFile "reachmaps\forge_halo.map"
PortTag Replace Single ui\chud\bitmaps\arming_meter.bitmap
Exit

EditTag ui\chud\bitmaps\scoreboard_meter.bitmap
Importbitmap 1 workingdir\bitmaps\scoreboard_meter.dds
SetField Sequences[2].Sprites[0].BitmapIndex 1
SetField Sequences[2].Sprites[0].RegistrationPoint 0 0
SetField Sequences[2].Sprites[0].Left -0.5
SetField Sequences[2].Sprites[0].Right 1.05
SetField Sequences[2].Sprites[0].Bottom 1.18
SaveTagChanges
Exit

EditTag ui\chud\scoreboard.chud_definition
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].ShaderType MeterGradient
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].ExternalInput FriendlyScore

SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].LocalScalarA 100
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].LocalScalarB 2
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].LocalScalarC 0.3
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].LocalScalarD 1

SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputColorA SecondaryBackground
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputColorC LocalB
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputColorD SecondaryBackground
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputColorE LocalD

SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputScalarB LocalA
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputScalarC LocalB
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputScalarD LocalC
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputScalarE RangeInput
SetField HudWidgets[1].BitmapWidgets[1].RenderData[0].OutputScalarF Input

SetField HudWidgets[1].TextWidgets[0].PlacementData[0].Offset -78 3
SetField HudWidgets[1].TextWidgets[0].PlacementData[0].Origin 0 1
# SetField HudWidgets[1].BitmapWidgets[0].PlacementData[0].Scale 1.2 1.2

# SetField HudWidgets[2].BitmapWidgets[1].StateData[0].GameEngineStateHO VariantCustomB
# SetField HudWidgets[2].BitmapWidgets[1].PlacementData[0].Offset -200 -2
# SetField HudWidgets[2].BitmapWidgets[1].PlacementData[0].Scale 1.25 1.25
# SetField HudWidgets[2].BitmapWidgets[1].BitmapSequenceIndex 2

# SetField HudWidgets[2].BitmapWidgets[2].StateData[0].GameState MPKing
# SetField HudWidgets[2].BitmapWidgets[2].PlacementData[0].Offset -200 -2
# SetField HudWidgets[2].BitmapWidgets[2].PlacementData[0].Scale 1.25 1.25
# SetField HudWidgets[2].BitmapWidgets[2].BitmapSequenceIndex 4

# SetField HudWidgets[2].BitmapWidgets[3].PlacementData[0].Offset -200 -2
# SetField HudWidgets[2].BitmapWidgets[3].PlacementData[0].Scale 1.25 1.25
# SetField HudWidgets[2].BitmapWidgets[3].BitmapSequenceIndex 3

SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].ShaderType MeterGradient
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].ExternalInput EnemyScore

SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].LocalScalarA 100
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].LocalScalarB 2
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].LocalScalarC 0.3
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].LocalScalarD 1

SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputColorA SecondaryBackground
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputColorC LocalB
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputColorD SecondaryBackground
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputColorE LocalD

SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputScalarB LocalA
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputScalarC LocalB
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputScalarD LocalC
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputScalarE RangeInput
SetField HudWidgets[2].BitmapWidgets[4].RenderData[0].OutputScalarF Input

SetField HudWidgets[2].TextWidgets[0].PlacementData[0].Origin 0 1
SetField HudWidgets[2].TextWidgets[0].PlacementData[0].Offset -78 3

SetField HudWidgets[4].BitmapWidgets[0].Name arming_meter
SetField HudWidgets[4].BitmapWidgets[0].ScriptingClass UseParent
SetField HudWidgets[4].BitmapWidgets[0].StateData[0].UnitMiscState FirstPerson,ThirdPerson
SetField HudWidgets[4].BitmapWidgets[0].BaseFlags None
SetField HudWidgets[4].BitmapWidgets[0].SortLayer Inherited
SetField HudWidgets[4].BitmapWidgets[0].PlacementData[0].Anchor BottomCenter
SetField HudWidgets[4].BitmapWidgets[0].PlacementData[0].AnchorFlags 0
SetField HudWidgets[4].BitmapWidgets[0].PlacementData[0].Origin 0 1
SetField HudWidgets[4].BitmapWidgets[0].PlacementData[0].Offset 0 -77
SetField HudWidgets[4].BitmapWidgets[0].PlacementData[0].Scale 1.917 1.817
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].ShaderType MeterSingleColor
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].BlendModeHO AlphaBlend
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].ExternalInput ArmingFraction
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].RangeInput One
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalColorA 0 0 0 0
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalColorB 0 0 0 0
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalColorC 0 0 0 0
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalColorD 0 0 0 0
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalScalarA 0
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalScalarB 0.2
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalScalarC 0.4
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalScalarD 30
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputColorA ScoreboardFriendly
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputColorB LocalB
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputColorC LocalB
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputColorD LocalB
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputColorE LocalB
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputColorF LocalB
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputScalarA Input
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputScalarB RangeInput
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputScalarC LocalA
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputScalarD LocalB
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputScalarE LocalC
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].OutputScalarF LocalD
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].ScissorRect 0 0 0 0
SetField HudWidgets[4].BitmapWidgets[0].RuntimeWidgetIndex 9
SetField HudWidgets[4].BitmapWidgets[0].Flags None
SetField HudWidgets[4].BitmapWidgets[0].Bitmap ui\chud\bitmaps\arming_meter.bitmap
SetField HudWidgets[4].BitmapWidgets[0].BitmapSequenceIndex 0

SetField HudWidgets[4].TextWidgets[0].PlacementData[0].Offset 0 -29
SetField HudWidgets[4].TextWidgets[1].PlacementData[0].Offset 0 -28.5

SetField HudWidgets[5].BitmapWidgets[0].PlacementData[0].Anchor ScoreboardFriendly
SetField HudWidgets[5].BitmapWidgets[0].PlacementData[0].Offset -200 -2
SetField HudWidgets[5].BitmapWidgets[0].PlacementData[0].Scale 1.25 1.25

SetField HudWidgets[5].BitmapWidgets[1].PlacementData[0].Anchor ScoreboardEnemy
SetField HudWidgets[5].BitmapWidgets[1].PlacementData[0].Offset -200 -2
SetField HudWidgets[5].BitmapWidgets[1].PlacementData[0].Scale 1.25 1.25

SetField HudWidgets[5].BitmapWidgets[2].PlacementData[0].Anchor ScoreboardFriendly
SetField HudWidgets[5].BitmapWidgets[2].PlacementData[0].Offset -200 -2
SetField HudWidgets[5].BitmapWidgets[2].PlacementData[0].Scale 1.25 1.25
RemoveBlockElements HudWidgets[5].BitmapWidgets[2].AnimationData 0 1

SetField HudWidgets[5].BitmapWidgets[3].PlacementData[0].Anchor ScoreboardEnemy
SetField HudWidgets[5].BitmapWidgets[3].PlacementData[0].Offset -200 -2
SetField HudWidgets[5].BitmapWidgets[3].PlacementData[0].Scale 1.25 1.25
RemoveBlockElements HudWidgets[5].BitmapWidgets[3].AnimationData 0 1

# Assault icons is broken on 0.7.1.0
# SetField HudWidgets[5].BitmapWidgets[4].PlacementData[0].Anchor ScoreboardFriendly
# SetField HudWidgets[5].BitmapWidgets[4].PlacementData[0].Offset -200 -2
# SetField HudWidgets[5].BitmapWidgets[4].PlacementData[0].Scale 1.25 1.25

# SetField HudWidgets[5].BitmapWidgets[5].PlacementData[0].Anchor ScoreboardEnemy
# SetField HudWidgets[5].BitmapWidgets[5].PlacementData[0].Offset -200 -2
# SetField HudWidgets[5].BitmapWidgets[5].PlacementData[0].Scale 1.25 1.25

SetField HudWidgets[5].BitmapWidgets[6].PlacementData[0].Anchor ScoreboardFriendly
SetField HudWidgets[5].BitmapWidgets[6].PlacementData[0].Offset -200 -2
SetField HudWidgets[5].BitmapWidgets[6].PlacementData[0].Scale 1.25 1.25

SetField HudWidgets[5].BitmapWidgets[7].PlacementData[0].Anchor ScoreboardEnemy
SetField HudWidgets[5].BitmapWidgets[7].PlacementData[0].Offset -200 -2
SetField HudWidgets[5].BitmapWidgets[7].PlacementData[0].Scale 1.25 1.25

SetField HudWidgets[5].BitmapWidgets[8].PlacementData[0].Scale 1.1 1.1
SetField HudWidgets[5].BitmapWidgets[8].PlacementData[0].Anchor ScoreboardFriendly
SetField HudWidgets[5].BitmapWidgets[8].RenderData[0].LocalColorA 0 200 200 200
SetField HudWidgets[5].BitmapWidgets[8].PlacementData[0].Origin 0 0
SetField HudWidgets[5].BitmapWidgets[8].PlacementData[0].Offset -175 -17

SetField HudWidgets[5].BitmapWidgets[10].PlacementData[0].Offset 0 110
SetField HudWidgets[5].BitmapWidgets[11].PlacementData[0].Offset 0 220
SetField HudWidgets[5].BitmapWidgets[12].PlacementData[0].Offset 0 220

SetField HudWidgets[5].TextWidgets[0].PlacementData[0].Offset 0 168
SetField HudWidgets[5].TextWidgets[1].PlacementData[0].Offset 0 277.5
SetField HudWidgets[5].TextWidgets[2].PlacementData[0].Offset 0 277.5
SaveTagChanges
Exit

EditTag ui\chud\sandbox.chud_definition
SetField HudWidgets[4].BitmapWidgets[0].PlacementData[0].Offset 2 -2
SetField HudWidgets[4].BitmapWidgets[0].PlacementData[0].Scale 1.25 1
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].ShaderType MeterGradient
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalScalarA 2
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalScalarB 0.5
SetField HudWidgets[4].BitmapWidgets[0].RenderData[0].LocalScalarC 1
SetField HudWidgets[4].BitmapWidgets[0].BitmapSequenceIndex 2
SetField HudWidgets[4].TextWidgets[1].PlacementData[0].Offset -130 4.5
SaveTagChanges
Exit

# echo ==Fix Covenant Sucker Plant Mopps...==
DuplicateTag objects\ui\editor_gizmo\editor_gizmo.collision_model levels\dlc\cex_damnation\scenery\cex_damnation_plant\cex_damnation_plant

EditTag levels\dlc\cex_damnation\scenery\cex_damnation_plant\cex_damnation_plant.model
SetField CollisionModel levels\dlc\cex_damnation\scenery\cex_damnation_plant\cex_damnation_plant.collision_model
AddBlockElements Materials
SetField Materials[0].DamageSectionIndex -1
SetField Materials[0].RuntimeDamagerMaterialIndex -1
SetField CollisionRegions[0].CollisionRegionIndex 0
SetField CollisionRegions[0].Permutations[0].CollisionPermutationIndex 0
SaveTagChanges
Exit

EditTag levels\dlc\cex_damnation\scenery\cex_damnation_plant\cex_damnation_plant.collision_model
GenerateBspPhysics
SetField Regions[0].Permutations[0].BspPhysics[0].GeometryShape.Model levels\dlc\cex_damnation\scenery\cex_damnation_plant\cex_damnation_plant.model
SaveTagChanges
Exit

# echo ==Restore Revenge Medal==
EditTag multiplayer\multiplayer_globals.multiplayer_globals
SetField Runtime[0].EarnWpEvents[31].MedalAward medal_nemesis
SetField Runtime[0].EarnWpEvents[31].RuntimeEventType General
SaveTagChanges
Exit

# echo ==Replace medals==
EditTag ui\chud\bitmaps\medals\medals.bitmap
ImportBitmap 0 "workingdir\bitmaps\medals.dds"
SaveTagChanges
Exit

# echo ==Replace Ranks==
EditTag ui\halox\common\roster\exp_med_ui.bitmap
ImportBitmap 0 "workingdir\bitmaps\exp_med_ui.dds"
SaveTagChanges
Exit

EditTag ui\halox\spartan_program\exp_lg_ui.bitmap
ImportBitmap 0 "workingdir\bitmaps\exp_lg_ui.dds"
SaveTagChanges
Exit


# echo ==Replace medals in medals_lg_ui with Reach Medals ==
RunCommands "workingdir\cmds\reachify_medals_lg_ui.cmds"

# echo ==Fix the glass on the duplicate DLC forge items ==
RunCommands "workingdir\cmds\forge_dlc_block_glass.cmds"

# echo ==Fix Armor Lights ==
OpenCacheFile "reachmaps\forge_halo.map"
PortTag replace single objects\characters\spartans\shaders\spartan_shield_display.shader
Exit

# echo ==Import Vehicle CC maps ==
duplicatetag objects\vehicles\warthog\bitmaps\warthog.bitmap objects\vehicles\human\civilian\forklift\bitmaps\forklift_cc
duplicatetag objects\vehicles\warthog\bitmaps\warthog.bitmap objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_cc

EditTag objects\characters\spartans\shaders\spartan_shield_display.rmsh
SetArgument self_illum_intensity 7
SetField shaderproperties[0].RoutingInfo[5].RegisterIndex 1
SetField shaderproperties[0].Functions[0].Type ChangeColorQuaternary
SaveTagChanges
Exit

ImportFonts workingdir\fonts_new.bin

DeleteModFiles

UpdateMapFiles "workingdir\info"

EditTag multiplayer\forge_globals.forge_globals_definition
MaximizeBudget All
SaveTagChanges
Exit

SaveModPackage "modsfolder\RAMP.pak"
ExitModPackage

# echo ==Make Pak Smaller ==
CreateModPackage 1 large
Reach Anniversary Multiplayer
Welcome to RAMP, a community effort to transform Eldewrito into Halo Reach while keeping ED main features and adding new ones. Featuring extensive bug fixes, quality of life improvements, and plenty of new content to play with. We hope you enjoy this labor of love, we'll see you starside.
AMP Collective
0.94
MainMenu Multiplayer Character

EditModMetaData
SetField metadata.URL https://github.com/Zekken01/Ramp-2
SaveModMetaData
Exit

OpenModPackage "modsfolder\RAMP.pak"
DeleteModFiles
ApplyModPackage
ExitModPackage

# echo == Reach Civilian Vehicles ==
RunCommands "workingdir\cmds\reachcivilianvehicles.cmds"

# echo ==Added Reach EMP effect to all vehicles ==
RunCommands "workingdir\cmds\EMP Effects.cmds"

EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container_tiled.shader
SetArgument specular_coefficient 0.2
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container_tiled_destroyed.shader
SetArgument specular_coefficient 0.2
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container.shader
SetArgument specular_coefficient 0.2
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container_crate.shader
SetArgument specular_coefficient 0.2
SaveTagChanges
Exit


echo ==H2AMP Beam Rifle==
OpenModPackage "workingdir\paks\h2amp_beam_rifle.pak"
ApplyModPackage
ExitModPackage

# Make sure this last part is always last to prevent emotes and falcon enter animations from breaking:
EditTag objects\characters\elite\elite.model_animation_graph
SortModes
SaveTagChanges
Exit
EditTag objects\characters\dervish\dervish.model_animation_graph
SortModes
SaveTagChanges
Exit
EditTag objects\characters\masterchief\masterchief.model_animation_graph
AddBlockElements Modes[14].ModeIk 2
SetField Modes[14].ModeIk[2].AttachToMarker right_foot_d_spartan
SetField Modes[14].ModeIk[2].Marker right_foot
SetField Modes[14].ModeIk[3].AttachToMarker left_foot_d_spartan
SetField Modes[14].ModeIk[3].Marker left_foot
SortModes
SaveTagChanges
Exit

# echo == H2A Beam rifle animaton ==
RunCommands "workingdir\cmds\enashh2abeamrifleanimation.cmds"

# echo ==Nerf Magnum accuracy and firing penalties==
EditTag objects\weapons\pistol\magnum\magnum.weapon
SetField Barrels[0].ProjectileErrorAngle 0.15 4
SetField Barrels[0].ErrorDecelerationRate 1.538462
SetField Barrels[0].ErrorAccelerationRate 30

AddBlockElements Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringPenaltyFunction
SetField Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringPenaltyFunction[0].Function.Data 08340000000000000000803F00000000000000006F12833A6F12033B3400000003000000040000CD295C8F3D704189409A99193F040000009A99993E00ACDB3D808A643F04000000FFFF7F7FE76C85BFBF6A9E3F
AddBlockElements Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringCrouchedPenaltyFunction
SetField Barrels[0].AccuracyPenalties.SingleWieldPenalties.FiringCrouchedPenaltyFunction[0].Function.Data 08340000000000000000803F00000000000000006F12833A6F12033B3400000003000000040000CD295C8F3D354D13401111113F04000000EC51983E560996BDBA9F3B3F04000000FFFF7F7FD4FC3BBF84F86D3F

SaveTagChanges
Exit

# echo ==Fixed biped rotating in customization screen and added rotation when selecting backpacks==
EditTag multiplayer\mod_globals.mod_globals
SetField PlayerCharacterCustomizations[0].RegionCameraScripts[5].BipedRotation 0
SaveTagChanges
Exit

EditTag multiplayer\mod_globals.mod_globals
CopyBlockElements PlayerCharacterCustomizations[0].RegionCameraScripts 0 1
PasteBlockElements PlayerCharacterCustomizations[0].RegionCameraScripts
SetField PlayerCharacterCustomizations[0].RegionCameraScripts[7].RegionName "backpack"
SetField PlayerCharacterCustomizations[0].RegionCameraScripts[7].BipedRotation 345
SaveTagChanges
Exit

# echo =Add AMP signature 
EditTag ui\halox\main_menu\bungielogo.bitmap
ImportBitmap 0 workingdir\bitmaps\amp-sig.dds
Exit

# echo =Fixed up customization background (Was very pixelated and had bad banding) Also fits screens on both 16:9 and 21:9.
EditTag levels\ui\mainmenu\bitmaps\campaign_act3_background.bitmap
ImportBitmap 0 workingdir\bitmaps\AuntieDot.dds
Exit

# echo Add Concept LMG
RunCommands "workingdir\cmds\lmg.cmds"

echo ==Add Stanchion==
RunCommands "workingdir\cmds\Stanchion.cmds"

echo ==Duals Weapons Animation==
RunCommands "workingdir\cmds\duals_sound.cmds"
RunCommands "workingdir\cmds\elite_duals_animations.cmds"
RunCommands "workingdir\cmds\spartan_duals_animations.cmds"

echo ==Duals Weapons Implementation==
RunCommands "workingdir\cmds\dual_weaps_implementation.cmds"

echo == Fix battle rifle power ammo counter ==
EditTag ui\chud\battle_rifle_power.chud_definition
SetField HudWidgets[5].BitmapWidgets[0].Bitmap ui\chud\bitmaps\ballistic_meters_odst.bitmap
SetField HudWidgets[5].BitmapWidgets[0].BitmapSequenceIndex 10
SetField HudWidgets[5].BitmapWidgets[0].PlacementData[0].Offset -40 110
SaveTagChanges
Exit

echo == Battle rifle firing animation ==
DuplicateTag dw3\r3ach\objects\weapons\rifle\dmr\animations\fp_elite\fp_elite.model_animation_graph dw3\r3ach\objects\weapons\rifle\battle_rifle\animations\fp_elite\fp_elite
EditTag dw3\r3ach\objects\weapons\rifle\battle_rifle\animations\fp_elite\fp_elite.model_animation_graph
AddAnimation workingdir\animations\elite_fp\battlerifle

SetField Animations[0].Weight 0.34
SetField Animations[0].AnimationData.NextAnimation 1

SetField Animations[1].Weight 0.67
SetField Animations[1].AnimationData.NextAnimation 2
SetField Animations[1].AnimationData.ParentAnimation 0

SetField Animations[2].Weight 1
SetField Animations[2].AnimationData.ParentAnimation 0
SetField Modes[0].WeaponClass[0].WeaponType[0].Set.Actions[0].Animation 0
SaveTagChanges
Exit

DuplicateTag dw3\r3ach\objects\weapons\rifle\dmr\animations\fp_spartan\fp_spartan.model_animation_graph dw3\r3ach\objects\weapons\rifle\battle_rifle\animations\fp_spartan\fp_spartan
EditTag dw3\r3ach\objects\weapons\rifle\battle_rifle\animations\fp_spartan\fp_spartan.model_animation_graph
AddAnimation workingdir\animations\spartan_fp\battlerifle

SetField Animations[0].Weight 0.34
SetField Animations[0].AnimationData.NextAnimation 1

SetField Animations[1].Weight 0.67
SetField Animations[1].AnimationData.NextAnimation 2
SetField Animations[1].AnimationData.ParentAnimation 0

SetField Animations[2].Weight 1
SetField Animations[2].AnimationData.ParentAnimation 0
SetField Modes[0].WeaponClass[0].WeaponType[0].Set.Actions[0].Animation 0
SaveTagChanges
Exit

ForEach weap contains: objects\weapons\rifle\battle_rifle SetField FirstPerson[0].FirstPersonAnimations dw3\r3ach\objects\weapons\rifle\battle_rifle\animations\fp_spartan\fp_spartan.model_animation_graph
ForEach weap contains: objects\weapons\rifle\battle_rifle SetField FirstPerson[1].FirstPersonAnimations dw3\r3ach\objects\weapons\rifle\battle_rifle\animations\fp_elite\fp_elite.model_animation_graph

# echo Remove Color Change block from compost bag pile
EditTag objects\props\human\pioneer\farm\bags_compost_pile_a\bags_compost_pile_a.scenery
RemoveBlockElements ChangeColors 0 *
SaveTagChanges
Exit

echo ==Super Carrier==
RunCommands "workingdir\cmds\SuperCarrier.cmds"

echo ==Space Vehicles + MAC Cannon==
OpenModPackage "workingdir\paks\ReachSpaceVehiclesNoBloatWare.pak"
applymodpackage
exitmodpackage

#Fix Space Banshee Shader, Rebuild pak with this pls.

edittag objects\vehicles\covenant\banshee\shaders\space_banshee.shader
setargument env_tint_color 0 0 0 1
setargument specular_tint 0.5 0.5 0.5 1
savetagchanges
exit

edittag objects\vehicles\covenant\banshee\shaders\space_banshee_glass.shader
setargument env_tint_color 0 0 0 1
setargument specular_tint 0.5 0.5 0.5 1
savetagchanges
exit

edittag objects\vehicles\covenant\banshee\shaders\space_banshee_wings.shader
setargument albedo_color 1 0.3490196 0.3490196 1
setargument env_tint_color 0.15 0 0.1 1
setargument specular_tint 0.5 0.5 0.5 1
savetagchanges
exit

# FIXUP for RAMP 2 only
# Watashi totte wa mikanzen
edittag ui\chud\mac_cannon.chud_definition
setfield HudWidgets[1].BitmapWidgets[1].PlacementData[0].Origin 0 -0.9
savetagchanges
exit
# I DONT GET IT

AddForgeItem "SABRE" "VEHICLES" objects\vehicles\human\sabre\sabre.vehicle
AddForgeItem "SERAPH" "VEHICLES" objects\vehicles\seraph_reach\seraph_reach.vehicle
AddForgeItem "BANSHEE, SPACE" "VEHICLES" objects\vehicles\covenant\space_banshee\space_banshee.vehicle
AddForgeItem "MAC CANNON" "VEHICLES" objects\vehicles\human\turrets\mac_15cm_mark_2488\mac_15cm_mark_2488.vehicle
AddForgeItem "PELICAN" 79 objects\vehicles\pelican_multiplayer\pelican_multiplayer.vehicle
AddForgeItem "PHANTOM" 79 objects\vehicles\phantom_test\phantom_test.vehicle
AddForgeItem "WOMBAT" 79 objects\vehicles\drone_alpha\drone_alpha.vehicle

edittag ui\hud\hud_messages.multilingual_unicode_string_list
setstring english shields_at "SHIELDS:"
setstring english hull_acceptable "HULL INTERGRITY:"
setstring english thruster_heat "THRUSTER HEAT"
setstring english gun_enabled "MACHINEGUN ENABLED|nSYSTEM ONLINE"
setstring english sabre_enter "\uE461\uE45F to pilot Sabre"
setstring english sabre_flip "\uE461\uE45F to flip Sabre"
setstring english sabre_gunner_enter "\uE461\uE45F to ride in Sabre"
setstring english mac_capacitors "CAPACITORS"
setstring english mac_online "ONLINE"
setstring english mac_abbreviations "ENUM:|n ELEV:|n ROTN:"
setstring english mac_charge "CHARGE"
setstring english mac_reload "RELOAD PROG."
setstring english mac_enter_driver "\uE461\uE45F to enter MAC Cannon"
setstring english seraph_drive "\uE461\uE45F to pilot Seraph"
setstring english seraph_flip "\uE461\uE45F to flip Seraph"
setstring english phantom_drive "\uE461\uE45F to pilot Phantom"
setstring english phantom_flip "\uE461\uE45F to flip Phantom"
setstring english pelican_drive "\uE461\uE45F to pilot Pelican"
setstring english pelican_flip "\uE461\uE45F to flip Pelican"
setstring english wombat_enter_driver "\uE461\uE45F to pilot Wombat"
setstring english wombat_flip "\uE461\uE45F to flip Wombat"
setstring english wombat_board "\uE461\uE45F to board enemy Wombat"
savetagchanges
exit

echo == EMP Fixup for Space vehicles pak ==
edittag objects\vehicles\drone_alpha\drone_alpha.vehicle
setfield EmpEffect objects\vehicles\covenant\banshee\fx\destruction\emp_drain.effect
savetagchanges
exit

edittag objects\vehicles\drone_alpha\drone_alpha.render_model
AddBlockElements MarkerGroups
AddBlockElements MarkerGroups[*].Markers
SetField MarkerGroups[*].Name fx_emp_drain
SetField MarkerGroups[*].Markers[0].RegionIndex -1
SetField MarkerGroups[*].Markers[0].PermutationIndex -1
SetField MarkerGroups[*].Markers[0].NodeIndex 1
SetField MarkerGroups[*].Markers[0].Translation -1.0646089 -1.144409E-06 -0.2662506
SetField MarkerGroups[*].Markers[0].Rotation -0 -0 -1 5.146E-07

AddBlockElements MarkerGroups
AddBlockElements MarkerGroups[*].Markers
SetField MarkerGroups[*].Name fx_emp_drain_canopy
SetField MarkerGroups[*].Markers[0].RegionIndex -1
SetField MarkerGroups[*].Markers[0].PermutationIndex -1
SetField MarkerGroups[*].Markers[0].NodeIndex 1
SetField MarkerGroups[*].Markers[0].Translation -1.0646089 -1.144409E-06 -0.2662506
SetField MarkerGroups[*].Markers[0].Rotation -0 -0 -1 5.146E-07
savetagchanges
exit

edittag objects\vehicles\seraph_reach\seraph_reach.vehicle
setfield EmpEffect objects\vehicles\covenant\banshee\fx\destruction\emp_drain.effect
savetagchanges
exit

edittag objects\vehicles\human\sabre\sabre.vehicle
setfield EmpRadius 4
setfield EmpEffect objects\vehicles\covenant\banshee\fx\destruction\emp_drain.effect
savetagchanges
exit

echo == Sabre lens flare fix ==
EditTag objects\vehicles\human\sabre\fx\running\main_engine_glow.lens_flare
SetField Reflections[0].ScaleCurveXFunction.Data 0834000000000000CDCCCC3E000000000000000000000000000000001400000001000000040000CDFFFF7F7F0000803F00000000
SetField Reflections[0].ScaleCurveYFunction.Data 0834000000000000CDCCCC3E000000000000000000000000000000001400000001000000040000CDFFFF7F7F0000803F00000000
SaveTagChanges
Exit

EditTag objects\vehicles\human\sabre\fx\running\wing_engine_glow.lens_flare
SetField Reflections[0].ScaleCurveXFunction.Data 0834000000000000CDCCCC3E000000000000000000000000000000001400000001000000040000CDFFFF7F7F0000803F00000000
SetField Reflections[0].ScaleCurveYFunction.Data 0834000000000000CDCCCC3E000000000000000000000000000000001400000001000000040000CDFFFF7F7F0000803F00000000
SaveTagChanges
Exit

EditTag objects\vehicles\human\sabre\fx\running\wing_engine_anamorphic.lens_flare
SetField Reflections[0].ScaleCurveXFunction.Data 083400000000000000000000000000000000000000000000000000001400000001000000040000CDFFFF7F7F0000803F00000000
SetField Reflections[0].ScaleCurveYFunction.Data 083400000000000000000000000000000000000000000000000000001400000001000000040000CDFFFF7F7F0000803F00000000
SaveTagChanges
Exit

echo == Sabre Lock On Location ==
edittag objects\vehicles\human\sabre\sabre.render_model
SetField MarkerGroups[46].Markers[0].Translation 2.2990158 2.2888182E-06 -1.5443493
SaveTagChanges
Exit

echo == Seraph Lock On Crosshair ==
EditTag ui\chud\v_sabre_turret.chud_definition
CopyBlockElements HudWidgets[1].BitmapWidgets 1 1
Exit

EditTag objects\vehicles\seraph_h3\chud\v_seraph.chud_definition
PasteBlockElements HudWidgets[0].BitmapWidgets 1
PasteBlockElements HudWidgets[0].BitmapWidgets 1

SetField HudWidgets[0].BitmapWidgets[1].RuntimeWidgetIndex 1
SetField HudWidgets[0].BitmapWidgets[1].PlacementData[0].Scale 0.15 0.15
SetField HudWidgets[0].BitmapWidgets[1].Bitmap dw3\r3ach\ui\chud\bitmaps\scope_plasma_launcher\scope_bits.bitmap

SetField HudWidgets[0].BitmapWidgets[2].RuntimeWidgetIndex 2
SetField HudWidgets[0].BitmapWidgets[2].PlacementData[0].Scale -0.1 -0.1
SetField HudWidgets[0].BitmapWidgets[2].AnimationData[0].Active.Flags PlayReverse
SetField HudWidgets[0].BitmapWidgets[2].Bitmap dw3\r3ach\ui\chud\bitmaps\scope_plasma_launcher\scope_bits.bitmap
SaveTagChanges
Exit

echo == Replace Pelican and Phantom render models ==
EditTag objects\vehicles\pelican_multiplayer\pelican_multiplayer.render_model
CopyBlockElements Materials 17 1
Exit

EditTag objects\vehicles\human\pelican\pelican.render_model
PasteBlockElements Materials
SaveTagChanges
CopyBlockElements Materials 0 *
Exit

EditTag objects\vehicles\pelican_multiplayer\pelican_multiplayer.render_model
RemoveBlockElements Materials 0 *
PasteBlockElements Materials
ReplaceRenderGeometry workingdir\models\PelicanHR.fbx markers
SaveTagChanges
Exit

EditTag objects\vehicles\human\pelican\pelican.device_machine
CopyBlockElements ChangeColors 0 *
Exit

EditTag objects\vehicles\pelican_multiplayer\pelican_multiplayer.vehicle
PasteBlockElements ChangeColors
SaveTagChanges
exit

EditTag objects\vehicles\human\pelican\pelican.model
CopyBlockElements Variants[0].Objects 0 1
Exit

EditTag objects\vehicles\pelican_multiplayer\pelican_multiplayer.model
PasteBlockElements Variants[0].Objects
SaveTagChanges
Exit

edittag objects\vehicles\phantom_test\phantom_test.vehicle
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
savetagchanges
exit

EditTag objects\vehicles\covenant\phantom\phantom.render_model
CopyBlockElements Materials 0 *
Exit

EditTag objects\vehicles\phantom_test\phantom_test.render_model
RemoveBlockElements Materials 7 1
PasteBlockElements Materials
ReplaceRenderGeometry workingdir\models\phantom.dae
SaveTagChanges
Exit

edittag objects\vehicles\covenant\phantom\shaders\phantom_exterior_shell.shader
setargument env_tint_color 0 0 0 1
savetagchanges
exit

edittag objects\vehicles\human\civilian\forklift\bitmaps\forklift_cc.bitmap
importbitmap 0 workingdir\bitmaps\vehicles_cc\forklift_cc.dds
savetagchanges
exit
edittag objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_cc.bitmap
importbitmap 0 workingdir\bitmaps\vehicles_cc\military_truck_cc.dds
savetagchanges
exit

EditTag objects\vehicles\covenant\phantom\shaders\phantom_exterior_shell.shader
AddBlockElements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[1].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[1].Type ChangeColorPrimary
AddFunction albedo_color Real 1
SetArgument albedo_blend 1
SaveTagChanges
Exit

EditTag objects\vehicles\seraph_reach\shaders\seraph_shell.shader
AddBlockElements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[1].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[1].Type ChangeColorPrimary
AddFunction albedo_color Real 1
SetArgument diffuse_coefficient 30
SaveTagChanges
Exit

EditTag objects\vehicles\seraph_reach\shaders\seraph_shell_damaged.shader
AddBlockElements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
AddFunction albedo_color Real 0
SetArgument diffuse_coefficient 30
SaveTagChanges
Exit

EditTag objects\vehicles\seraph_reach\seraph_reach.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].VariantName default
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.05 0.05 0.05
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.05 0.05 0.05
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

#Sabre
EditTag objects\vehicles\human\sabre\shaders\sabre_frame_metal.shader
AddBlockElements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[1].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[1].Type ChangeColorPrimary
AddFunction albedo_color Real 1
SetArgument albedo_blend 1
SetArgument fresnel_color 0.09137256 0.07882354 0.06313726 1
SaveTagChanges
Exit

EditTag objects\vehicles\human\sabre\shaders\sabre_frame_metal_damage.shader
AddBlockElements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[1].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[1].Type ChangeColorPrimary
AddFunction albedo_color Real 1
SetArgument albedo_blend 1
SetArgument fresnel_color 0.09137256 0.07882354 0.06313726 1
SaveTagChanges
Exit

EditTag objects\vehicles\human\sabre\sabre.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].VariantName default
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

#Cart
GenerateBitmap objects\vehicles\human\civilian\cart_electric\bitmaps\cart_and_trailer_cc "workingdir\bitmaps\vehicles_cc\cart_and_trailer_cc.dds"
EditTag objects\vehicles\human\civilian\cart_electric\shaders\electric_cart_and_trailer_destroyed.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_1_0_1_13_2_0_0_0_4_0_0.render_method_template
RemoveBlockElements ShaderProperties[0].TextureConstants 0 *
AddBlockElements ShaderProperties[0].TextureConstants 5
SetBitmap base_map objects\vehicles\human\civilian\cart_electric\bitmaps\cart_and_trailer_diffuse.bitmap
SetField ShaderProperties[0].TextureConstants[0].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[0].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[0].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[0].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[0].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[0].TextureTransformOverlayIndices.Integer 0
SetBitmap detail_map shaders\default_bitmaps\bitmaps\default_detail.bitmap
SetField ShaderProperties[0].TextureConstants[1].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[1].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[1].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[1].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[1].TextureTransformConstantIndex 1
SetField ShaderProperties[0].TextureConstants[1].TextureTransformOverlayIndices.Integer 0
SetBitmap change_color_map objects\vehicles\human\civilian\cart_electric\bitmaps\cart_and_trailer_cc.bitmap
SetField ShaderProperties[0].TextureConstants[2].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[2].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[2].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[2].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[2].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[2].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_map objects\vehicles\human\civilian\cart_electric\bitmaps\cart_and_trailer_zbump.bitmap
SetField ShaderProperties[0].TextureConstants[3].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[3].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[3].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[3].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[3].TextureTransformConstantIndex 3
SetField ShaderProperties[0].TextureConstants[3].TextureTransformOverlayIndices.Integer 0
SetBitmap material_texture shaders\default_bitmaps\bitmaps\gray_50_percent.bitmap
SetField ShaderProperties[0].TextureConstants[4].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[4].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[4].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[4].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[4].TextureTransformConstantIndex 15
SetField ShaderProperties[0].TextureConstants[4].TextureTransformOverlayIndices.Integer 0
SetArgument change_color_map 1 1 0 0
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\cart_electric\shaders\electric_cart_and_trailer.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_1_0_1_13_2_0_0_0_4_0_0.render_method_template
RemoveBlockElements ShaderProperties[0].TextureConstants 0 *
AddBlockElements ShaderProperties[0].TextureConstants 5
SetBitmap base_map objects\vehicles\human\civilian\cart_electric\bitmaps\cart_and_trailer_diffuse.bitmap
SetField ShaderProperties[0].TextureConstants[0].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[0].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[0].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[0].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[0].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[0].TextureTransformOverlayIndices.Integer 0
SetBitmap detail_map objects\props\human\pioneer\bitmaps\metal_rand_scratches_detail.bitmap
SetField ShaderProperties[0].TextureConstants[1].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[1].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[1].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[1].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[1].TextureTransformConstantIndex 1
SetField ShaderProperties[0].TextureConstants[1].TextureTransformOverlayIndices.Integer 0
SetBitmap change_color_map objects\vehicles\human\civilian\cart_electric\bitmaps\cart_and_trailer_cc.bitmap
SetField ShaderProperties[0].TextureConstants[2].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[2].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[2].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[2].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[2].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[2].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_map objects\vehicles\human\civilian\cart_electric\bitmaps\cart_and_trailer_zbump.bitmap
SetField ShaderProperties[0].TextureConstants[3].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[3].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[3].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[3].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[3].TextureTransformConstantIndex 3
SetField ShaderProperties[0].TextureConstants[3].TextureTransformOverlayIndices.Integer 0
SetBitmap material_texture shaders\default_bitmaps\bitmaps\gray_50_percent.bitmap
SetField ShaderProperties[0].TextureConstants[4].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[4].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[4].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[4].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[4].TextureTransformConstantIndex 15
SetField ShaderProperties[0].TextureConstants[4].TextureTransformOverlayIndices.Integer 0
SetArgument change_color_map 1 1 0 0
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\cart_electric\cart_electric.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].VariantName default
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

#Forklift
EditTag objects\vehicles\human\civilian\forklift\shaders\forklift_nwo.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_2_0_1_13_2_0_0_0_4_0_0.render_method_template
RemoveBlockElements ShaderProperties[0].TextureConstants 0 *
AddBlockElements ShaderProperties[0].TextureConstants 6
SetBitmap base_map objects\vehicles\human\civilian\forklift\bitmaps\forklift_diffuse.bitmap
SetField ShaderProperties[0].TextureConstants[0].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[0].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[0].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[0].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[0].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[0].TextureTransformOverlayIndices.Integer 0
SetBitmap detail_map objects\vehicles\human\civilian\pickup\bitmaps\pioneer_truck_paint_detail_diffuse.bitmap
SetField ShaderProperties[0].TextureConstants[1].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[1].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[1].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[1].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[1].TextureTransformConstantIndex 1
SetField ShaderProperties[0].TextureConstants[1].TextureTransformOverlayIndices.Integer 0
SetBitmap change_color_map objects\vehicles\human\civilian\forklift\bitmaps\forklift_cc.bitmap
SetField ShaderProperties[0].TextureConstants[2].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[2].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[2].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[2].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[2].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[2].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_map objects\vehicles\human\civilian\forklift\bitmaps\forklift_zbump.bitmap
SetField ShaderProperties[0].TextureConstants[3].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[3].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[3].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[3].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[3].TextureTransformConstantIndex 3
SetField ShaderProperties[0].TextureConstants[3].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_detail_map objects\weapons\rifle\assault_rifle\bitmaps\gun_microbump.bitmap
SetField ShaderProperties[0].TextureConstants[4].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[4].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[4].FilterMode Anisotropic4EXPENSIVE
SetField ShaderProperties[0].TextureConstants[4].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[4].TextureTransformConstantIndex 4
SetField ShaderProperties[0].TextureConstants[4].TextureTransformOverlayIndices.Integer 0
SetBitmap material_texture shaders\default_bitmaps\bitmaps\gray_50_percent.bitmap
SetField ShaderProperties[0].TextureConstants[5].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[5].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[5].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[5].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[5].TextureTransformConstantIndex 16
SetField ShaderProperties[0].TextureConstants[5].TextureTransformOverlayIndices.Integer 0
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\forklift\shaders\forklift_nwo_destroyed.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_2_0_1_13_2_0_0_0_4_0_0.render_method_template
RemoveBlockElements ShaderProperties[0].TextureConstants 0 *
AddBlockElements ShaderProperties[0].TextureConstants 6
SetBitmap base_map objects\vehicles\human\civilian\forklift\bitmaps\forklift_diffuse.bitmap
SetField ShaderProperties[0].TextureConstants[0].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[0].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[0].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[0].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[0].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[0].TextureTransformOverlayIndices.Integer 0
SetBitmap detail_map objects\props\human\pioneer\bitmaps\damage_detail_a.bitmap
SetField ShaderProperties[0].TextureConstants[1].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[1].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[1].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[1].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[1].TextureTransformConstantIndex 1
SetField ShaderProperties[0].TextureConstants[1].TextureTransformOverlayIndices.Integer 0
SetBitmap change_color_map objects\vehicles\human\civilian\forklift\bitmaps\forklift_cc.bitmap
SetField ShaderProperties[0].TextureConstants[2].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[2].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[2].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[2].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[2].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[2].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_map objects\vehicles\human\civilian\forklift\bitmaps\forklift_zbump.bitmap
SetField ShaderProperties[0].TextureConstants[3].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[3].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[3].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[3].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[3].TextureTransformConstantIndex 3
SetField ShaderProperties[0].TextureConstants[3].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_detail_map objects\weapons\rifle\assault_rifle\bitmaps\gun_microbump.bitmap
SetField ShaderProperties[0].TextureConstants[4].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[4].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[4].FilterMode Anisotropic4EXPENSIVE
SetField ShaderProperties[0].TextureConstants[4].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[4].TextureTransformConstantIndex 4
SetField ShaderProperties[0].TextureConstants[4].TextureTransformOverlayIndices.Integer 0
SetBitmap material_texture shaders\default_bitmaps\bitmaps\gray_50_percent.bitmap
SetField ShaderProperties[0].TextureConstants[5].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[5].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[5].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[5].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[5].TextureTransformConstantIndex 16
SetField ShaderProperties[0].TextureConstants[5].TextureTransformOverlayIndices.Integer 0
savetagchanges
exit

EditTag objects\vehicles\human\civilian\forklift\forklift.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].VariantName default
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

#Military Truck
EditTag objects\vehicles\human\civilian\military_truck\shaders\military_truck.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_1_0_1_13_2_0_0_0_4_0_0.render_method_template
SetField Options[0].OptionIndex 3
RemoveBlockElements ShaderProperties[0].TextureConstants 0 *
AddBlockElements ShaderProperties[0].TextureConstants 5
SetBitmap base_map objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_diffuse.bitmap
SetField ShaderProperties[0].TextureConstants[0].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[0].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[0].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[0].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[0].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[0].TextureTransformOverlayIndices.Integer 0
SetBitmap detail_map shaders\default_bitmaps\bitmaps\default_detail.bitmap
SetField ShaderProperties[0].TextureConstants[1].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[1].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[1].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[1].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[1].TextureTransformConstantIndex 1
SetField ShaderProperties[0].TextureConstants[1].TextureTransformOverlayIndices.Integer 0
SetBitmap change_color_map objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_cc.bitmap
SetField ShaderProperties[0].TextureConstants[2].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[2].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[2].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[2].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[2].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[2].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_map objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_zbump.bitmap
SetField ShaderProperties[0].TextureConstants[3].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[3].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[3].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[3].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[3].TextureTransformConstantIndex 3
SetField ShaderProperties[0].TextureConstants[3].TextureTransformOverlayIndices.Integer 0
SetBitmap material_texture shaders\default_bitmaps\bitmaps\gray_50_percent.bitmap
SetField ShaderProperties[0].TextureConstants[4].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[4].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[4].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[4].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[4].TextureTransformConstantIndex 15
SetField ShaderProperties[0].TextureConstants[4].TextureTransformOverlayIndices.Integer 0
SetArgument diffuse_coefficient 1
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\military_truck\shaders\military_truck_destroyed.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_1_0_1_13_2_0_0_0_4_0_0.render_method_template
SetField Options[0].OptionIndex 3
RemoveBlockElements ShaderProperties[0].TextureConstants 0 *
AddBlockElements ShaderProperties[0].TextureConstants 5
SetBitmap base_map objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_diffuse.bitmap
SetField ShaderProperties[0].TextureConstants[0].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[0].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[0].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[0].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[0].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[0].TextureTransformOverlayIndices.Integer 0
SetBitmap detail_map objects\bitmaps\detail_maps\burned_detail_a_diff.bitmap
SetField ShaderProperties[0].TextureConstants[1].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[1].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[1].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[1].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[1].TextureTransformConstantIndex 1
SetField ShaderProperties[0].TextureConstants[1].TextureTransformOverlayIndices.Integer 0
SetBitmap change_color_map objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_cc.bitmap
SetField ShaderProperties[0].TextureConstants[2].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[2].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[2].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[2].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[2].TextureTransformConstantIndex 0
SetField ShaderProperties[0].TextureConstants[2].TextureTransformOverlayIndices.Integer 0
SetBitmap bump_map objects\vehicles\human\civilian\military_truck\bitmaps\military_truck_zbump.bitmap
SetField ShaderProperties[0].TextureConstants[3].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[3].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[3].FilterMode Anisotropic2Expensive
SetField ShaderProperties[0].TextureConstants[3].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[3].TextureTransformConstantIndex 3
SetField ShaderProperties[0].TextureConstants[3].TextureTransformOverlayIndices.Integer 0
SetBitmap material_texture shaders\default_bitmaps\bitmaps\gray_50_percent.bitmap
SetField ShaderProperties[0].TextureConstants[4].BitmapIndex 0
SetField ShaderProperties[0].TextureConstants[4].SamplerAddressMode.SamplerAddressUV 0
SetField ShaderProperties[0].TextureConstants[4].FilterMode Trilinear
SetField ShaderProperties[0].TextureConstants[4].ExternTextureMode UseBitmapAsNormal
SetField ShaderProperties[0].TextureConstants[4].TextureTransformConstantIndex 15
SetField ShaderProperties[0].TextureConstants[4].TextureTransformOverlayIndices.Integer 0
SetArgument diffuse_coefficient 1
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container.shader
AddBlockElements ShaderProperties[0].Functions
SetField ShaderProperties[0].Functions[1].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
SetField ShaderProperties[0].Functions[1].Type ChangeColorPrimary
AddFunction albedo_color Real 1
SetArgument diffuse_coefficient 1
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container_tiled.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_1_0_1_13_2_0_0_0_4_0_0.render_method_template
SetField Options[0].OptionIndex 3
SetField ShaderProperties[0].TextureConstants[2].Bitmap shaders\default_bitmaps\bitmaps\color_red.bitmap
SaveTagChanges
Exit

EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container_tiled_destroyed.shader
SetField ShaderProperties[0].Template shaders\shader_templates\_3_1_0_1_13_2_0_0_0_4_0_0.render_method_template
SetField Options[0].OptionIndex 3
SetField ShaderProperties[0].TextureConstants[2].Bitmap shaders\default_bitmaps\bitmaps\color_red.bitmap
SaveTagChanges
Exit

edittag objects\vehicles\human\civilian\military_truck\military_truck.vehicle
removeblockelements ChangeColors 0 *
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

edittag objects\vehicles\human\civilian\military_van\military_van.vehicle
removeblockelements ChangeColors 0 *
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

# Military truck containers
Generatebitmap shaders\default_bitmaps\bitmaps\military_container_crate_cc "workingdir\bitmaps\object_cc\military_container_cc.dds"
EditTag objects\vehicles\human\civilian\truck_cab_large\shaders\military_container_crate.shader
setfield ShaderProperties[0].Template shaders\shader_templates\_3_1_0_1_13_2_0_0_0_4_0_0.render_method_template
setfield Options[0].OptionIndex 3
setfield ShaderProperties[0].TextureConstants[2].Bitmap shaders\default_bitmaps\bitmaps\military_container_crate_cc.bitmap
setargument diffuse_coefficient 1
savetagchanges
exit

EditTag objects\vehicles\human\civilian\truck_cab_large\attachments\container_long_military\container_long_military.crate
removeblockelements ChangeColors 0 *
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

EditTag objects\vehicles\human\civilian\truck_cab_large\attachments\container_small_military\container_small_military.scenery
removeblockelements ChangeColors 0 *
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

#Falcon change color, Thanks Pedro!
edittag objects\vehicles\human\falcon\falcon.vehicle
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\human\falcon\falcon_nose_gun.vehicle
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\human\falcon\falcon_transport.vehicle
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\falcon\shaders\falcon_hull_1.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

edittag objects\vehicles\falcon\shaders\falcon_hull_2.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

edittag objects\vehicles\falcon\shaders\falcon_hull_1_damaged.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

edittag objects\vehicles\falcon\shaders\falcon_hull_2_damaged.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

#Scorpion
edittag objects\vehicles\human\scorpion\shaders\scorpion.shader
setfield ShaderProperties[0].Template shaders\shader_templates\_3_2_0_1_13_2_0_0_0_4_0_0.render_method_template
setfield Options[0].OptionIndex 3
copyblockelements ShaderProperties[0].TextureConstants 0 1
pasteblockelements ShaderProperties[0].TextureConstants
swapblockelements ShaderProperties[0].TextureConstants 5 2
setfield ShaderProperties[0].TextureConstants[2].Bitmap shaders\default_bitmaps\bitmaps\color_red.bitmap
savetagchanges
exit

edittag objects\vehicles\human\scorpion\shaders\scorpion_turrets.shader
setfield ShaderProperties[0].Template shaders\shader_templates\_3_2_0_1_13_2_0_0_0_4_0_0.render_method_template
setfield Options[0].OptionIndex 3
copyblockelements ShaderProperties[0].TextureConstants 0 1
pasteblockelements ShaderProperties[0].TextureConstants
swapblockelements ShaderProperties[0].TextureConstants 5 2
setfield ShaderProperties[0].TextureConstants[2].Bitmap shaders\default_bitmaps\bitmaps\color_red.bitmap
savetagchanges
exit

EditTag objects\vehicles\scorpion\scorpion.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].VariantName default
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 1 1 1
setfield ChangeColors[0].InitialPermutations[0].Weight 0.1
savetagchanges
exit

#revenant
edittag objects\vehicles\covenant\revenant\revenant.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\covenant\revenant\turrets\revenant_plasma_mortar\revenant_plasma_mortar.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\covenant\revenant\shaders\revenant_shell.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

#Wombat
edittag objects\vehicles\drone_alpha\drone_alpha.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\drone_alpha\shaders\drone_fighter_matte.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
SetArgument fresnel_color 0.05019608 0.05019608 0.05019608 1
SetArgument specular_tint 0.07098039 0.0764706 0.07921569 1
savetagchanges
exit

#Space Banshee
edittag objects\vehicles\covenant\space_banshee\space_banshee.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\covenant\banshee\shaders\space_banshee.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

edittag objects\vehicles\covenant\banshee\shaders\space_banshee_glass.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

edittag objects\vehicles\covenant\banshee\shaders\space_banshee_wings.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

#Mac Canon
edittag objects\vehicles\human\turrets\mac_15cm_mark_2488\mac_15cm_mark_2488.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\human\turrets\mac_15cm_mark_2488\shaders\mac_metal.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 1
AddFunction albedo_color Real 0
savetagchanges
exit

edittag objects\vehicles\human\turrets\mac_15cm_mark_2488\shaders\mac_metal_panel_tiling.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 1
AddFunction albedo_color Real 0
savetagchanges
exit

#Shade Turret
edittag objects\vehicles\shade\shade.vehicle
addblockelements ChangeColors
addblockelements ChangeColors[0].InitialPermutations
setfield ChangeColors[0].InitialPermutations[0].ColorLowerBound 0.12941177 0.12941177 0.12941177
setfield ChangeColors[0].InitialPermutations[0].ColorUpperBound 0.12941177 0.12941177 0.12941177
savetagchanges
exit

edittag objects\vehicles\shade\shaders\shade.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit

edittag objects\vehicles\shade\shaders\shade_metal.shader
addblockelements ShaderProperties[0].Functions
setfield ShaderProperties[0].Functions[0].Function.Data 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
setfield ShaderProperties[0].Functions[0].Type ChangeColorPrimary
setargument diffuse_coefficient 10
AddFunction albedo_color Real 0
savetagchanges
exit


echo ==Add Void Canvas Map==

GenerateCanvas
levels\eldewrito\canvas\void
Void
Fill the void with your deepest desires.
dank
65534


duplicatetag levels\multi\45_aftship\sky_45_aftship\sky_45_aftship.scenery
nametag * levels\multi\void\sky_void\sky_void\sky_void

duplicatetag levels\multi\45_aftship\sky_45_aftship\sky_45_aftship.model
nametag * levels\multi\void\void\sky_void\sky_void

duplicatetag levels\multi\45_aftship\sky_45_aftship\sky_45_aftship.render_model
nametag * levels\multi\void\void\void\sky_void

duplicatetag levels\solo\m45\sky_corvette\shaders\space.shader
nametag * levels\solo\void\void\shaders\space_void
savetagnames

edittag levels\eldewrito\canvas\void.scenario
setfield StructureBsps[0].Cubemap rasterizer\invalid.bitmap
setfield StructureBsps[0].Wind null
addblockelements SkyReferences 5 1
setfield SkyReferences[0].SkyObject levels\multi\void\sky_void\sky_void\sky_void.scenery
setfield SkyReferences[0].ActiveBsps Bsp1
setfield SkyReferences[0].NameIndex -1
setfield SkyReferences[1].SkyObject levels\multi\void\sky_void\sky_void\sky_void.scenery
setfield SkyReferences[1].ActiveBsps None
setfield SkyReferences[0].NameIndex -1
setfield SkyReferences[2].SkyObject levels\multi\void\sky_void\sky_void\sky_void.scenery
setfield SkyReferences[2].ActiveBsps None
setfield SkyReferences[0].NameIndex -1
setfield SkyReferences[3].SkyObject levels\multi\void\sky_void\sky_void\sky_void.scenery
setfield SkyReferences[3].ActiveBsps None
setfield SkyReferences[0].NameIndex -1
setfield SkyReferences[4].SkyObject levels\multi\void\sky_void\sky_void\sky_void.scenery
setfield SkyReferences[4].ActiveBsps None
setfield SkyReferences[0].NameIndex -1
setfield SkyReferences[5].SkyObject levels\multi\void\sky_void\sky_void\sky_void.scenery
setfield SkyReferences[5].ActiveBsps Bsp0
setfield SkyReferences[0].NameIndex -1
setfield ZoneSetPvs[0].StructureBspPvs[0].AttachedSkyIndices[0].SkyIndex 5
setfield ZoneSetPvs[0].StructureBspPvs[0].VisibleSkyIndices[0].SkyIndex 5
setfield SkyParameters levels\multi\45_aftship\45_aftship.sky_atm_parameters
savetagchanges
exit

EditTag levels\eldewrito\canvas\void_bsp_0.scenario_structure_bsp
SetField WorldBoundsX -1000 1000
SetField WorldBoundsY -1000 1000
SetField WorldBoundsZ -1000 1000
SetField Clusters[0].BoundsX -1000 1000
SetField Clusters[0].BoundsY -1000 1000
SetField Clusters[0].BoundsZ -1000 1000
SetField Physics.MoppBoundsMin -1000 -1000 -1000
SetField Physics.MoppBoundsMax 1000 1000 1000
SaveTagChanges
Exit

edittag levels\multi\void\sky_void\sky_void\sky_void.scenery
setfield Model levels\multi\void\void\sky_void\sky_void.model
savetagchanges
exit

edittag levels\multi\void\void\sky_void\sky_void.model
setfield RenderModel levels\multi\void\void\void\sky_void.render_model
savetagchanges
exit

edittag levels\multi\void\void\void\sky_void.render_model
setfield Materials[1].RenderMethod levels\solo\void\void\shaders\space_void.shader
savetagchanges
exit

edittag levels\solo\void\void\shaders\space_void.shader
setargument albedo_color 0 0 0 1
savetagchanges
exit

edittag levels\eldewrito\canvas\void.camera_fx_settings
setfield Exposure.Strength 3.5
savetagchanges
exit

EditTag levels\eldewrito\canvas\void.scenario
AddBlockElements CutsceneCameraPoints
SetField CutsceneCameraPoints[0].Name "prematch_camera"
SetField CutsceneCameraPoints[0].Flags PrematchCameraHack
SetField CutsceneCameraPoints[0].Position 0 0 0
SetField CutsceneCameraPoints[0].Orientation 0 0 0
AddBlockElements CutsceneCameraPoints
SetField CutsceneCameraPoints[1].Name "podium_camera"
SetField CutsceneCameraPoints[1].Position 0 0 0
SetField CutsceneCameraPoints[1].Orientation 0 0 0
SetField CutsceneCameraPoints[1].Flags PodiumCameraHack
CompilePodiumScripts
SaveTagChanges
Exit

# echo ==Set Description for VOID...==

EditMap void.map
SetField Blf.Scenario.Names[0].Name "Void"
SetField Blf.Scenario.Descriptions[0].Name "Fill the void with your deepest desires."
SaveMapChanges
Exit

echo ==Fix Screens on Weapons==
EditTag dw3\r3ach\objects\weapons\rifle\sniper_rifle\shaders\scope_alpha.shader_halogram
SetArgument self_illum_map 0.6 0.6 0.19 0.16
SaveTagChanges
Exit

EditTag dw3\r3ach\objects\weapons\support_high\spartan_laser\shaders\spartan_laser_scope_alpha.shader_halogram
SetArgument self_illum_map 0.6 0.6 0.2 0.2
SaveTagChanges
Exit

EditTag dw3\r3ach\objects\weapons\support_high\flak_cannon\shaders\fuel_rod_scope_alpha.shader_halogram
SetArgument self_illum_map 0.6 0.6 0.19 0.17
SaveTagChanges
Exit

EditTag dw3\r3ach\objects\weapons\rifle\focus_rifle\shaders\focus_rifle_scope_alpha.shader_halogram
SetArgument self_illum_map 0.6 0.6 0.07 0.31
SaveTagChanges
Exit

# echo ==Increase LOD of explosions==

EditTag objects\multi\land_mine\land_mine.model
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[0].EffectMarkerName up
SetField NewDamageInfo[0].DamageSections[0].InstantResponses[0].DamageEffectMarkerName up
SaveTagChanges
Exit

EditTag fx\fx_library\explosions\human_explosion_medium\human_explosion_medium.effect
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag fx\fx_library\explosions\covenant_explosion_large\covenant_explosion_large.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 100
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag fx\fx_library\explosions\human_explosion_medium\human_explosion_medium.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 100
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\weapons\grenade\frag_grenade\fx\projectile.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 100
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\weapons\grenade\frag_grenade\fx\airborne_detonation.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 100
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\weapons\grenade\frag_grenade\fx\projectile.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 100
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\weapons\grenade\plasma_grenade\fx\projectile.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 100
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\weapons\grenade\plasma_grenade\fx\airborne_detonation.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 100
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\vehicles\covenant\revenant\fx\weapon\mortar\impact.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 400
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\vehicles\covenant\wraith\fx\weapon\mortar\detonation.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 400
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag objects\vehicles\human\warthog\fx\weapon\rocket\detonation.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 200
ForEach Events ForEach ParticleSystems setfield LodFeatherInDelta 1
SaveTagChanges
Exit

EditTag dw3\r3ach\objects\weapons\support_high\plasma_launcher\projectiles\attachments\attached.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 200
SaveTagChanges
Exit

EditTag dw3\r3ach\objects\weapons\rifle\concussion_rifle\projectiles\attachments\projectile.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 200
SaveTagChanges
Exit

EditTag dw3\r3ach\objects\weapons\rifle\concussion_rifle\projectiles\detonation.effect
ForEach Events ForEach ParticleSystems setfield LodOutDistance 200
SaveTagChanges
Exit

echo ==Boulder_Scale Render distance==

EditTag objects\scenery\nature\boulder_scale\boulder_scale.model
SetField DisappearDistance 80
SaveTagChanges
Exit

echo ==Fall Damage??==

opencachefile odstmaps\sc100.map
porttag replace globals\collision_damage\biped_player.collision_damage
exit

edittag globals\collision_damage\biped_player.collision_damage
setfield AbsoluteDamageAccelerationBounds 7.5 15
savetagchanges
exit

echo == Fix Reflection coll projectile issue ==

EditTag levels\multi\52_ivory_tower\52_ivory_tower_030.scenario_structure_bsp
setfield InstancedGeometryInstances[1128].DefinitionIndex 163
SetField InstancedGeometryInstances[1128].Matrix -3.576279E-07 -2 0 1.22 -3.576279E-07 0 0 0 1 -20.18834 -184.5017 250.2079
savetagchanges
exit

echo == Fix Condemned coll issue ==

edittag levels\dlc\condemned\condemned.scenario_structure_bsp
setfield InstancedGeometryInstances[983].Flags RenderOnly,MiscoloredBsp
savetagchanges
exit

echo == Fix Countdown sliding issue ==
edittag levels\multi\45_launch_station\45_launch_station.scenario_structure_bsp
setfield InstancedGeometryInstances[1282].Matrix 0.7071068 -0.7071067 8.742276E-08 0.7071067 0.7071068 8.7422784E-08 -1.2363446E-07 -2.842171E-14 -1 -144.45734 2.4000063 6.085458
setfield InstancedGeometryInstances[1284].Matrix 0.7071068 -0.7071067 8.742276E-08 0.7071067 0.7071068 8.7422784E-08 -1.2363446E-07 -2.842171E-14 -1 -146.27193 4.2146044 6.2802134
savetagchanges
exit

echo == Increase LOD effects on Corvette Projectile (make it purple) ==

edittag objects\levels\ca_dev\dlc_condemned\corvette_battle\fx\covenant_explosion_artillery_huge.effect
setfield Events[1].ParticleSystems[0].InverseLodFeatherIn 1
setfield Events[1].ParticleSystems[0].LodOutDistance 2000
setfield Events[1].ParticleSystems[0].LodInDistance 0
setfield Events[2].ParticleSystems[0].InverseLodFeatherIn 1
setfield Events[2].ParticleSystems[0].LodOutDistance 2000
setfield Events[2].ParticleSystems[1].InverseLodFeatherIn 1
setfield Events[2].ParticleSystems[1].LodOutDistance 2000
setfield Events[2].ParticleSystems[2].InverseLodFeatherIn 1
setfield Events[2].ParticleSystems[2].LodOutDistance 2000
setfield Events[3].ParticleSystems[0].InverseLodFeatherIn 1
setfield Events[3].ParticleSystems[0].LodOutDistance 2000
setfield Events[4].ParticleSystems[0].InverseLodFeatherIn 1
setfield Events[4].ParticleSystems[0].LodOutDistance 2000
savetagchanges
Exit

edittag objects\vehicles\covenant\covenant_fleet\corvette\shaders\corvette_purp.shader
setargument specular_tint 0.4 0.2 0.4 1
savetagchanges
exit

echo == MOA JOCKEY ==
RunCommands "workingdir\cmds\Moa.cmds"

echo == FF Map Variants ==
RunCommands "workingdir\cmds\FFMapVariants.cmds"

EditTag multiplayer\forge_globals.forge_globals_definition
RemoveBlockElements Palette 502 12
SaveTagChanges
Exit

echo == Fix Edge edging Eldorito into a coma==
OpenModPackage workingdir\paks\FixStupidEdgeCrash.pak
ApplyModPackage
ExitModPackage

EditTag levels\multi\s3d_reactor\s3d_reactor.scenario_lightmap_bsp_data
SetField LightmapSHCoefficientsBitmap levels\multi\s3d_edge\s3d_edge_lightmap_s3d_edge_16f_lp_array_dxt5.bitmap
SetField LightmapDominantLightDirectionBitmap levels\multi\s3d_edge\s3d_edge_lightmap_s3d_edge_16f_lp_array_intensity_dxt5.bitmap
SaveTagChanges
Exit

echo == Fix Revenant taking less damage from AOE/explosions ==
edittag objects\vehicles\covenant\revenant\revenant.model
setfield NewDamageInfo[0].Flags PassesAreaDamageToChildren
setfield NewDamageInfo[0].DamageSections[0].Flags TakesFullDamageWhenObjectDies,AllowDamageResponseOverflow
setfield NewDamageInfo[0].DamageSections[0].InstantResponses[0].Flags TriggersSpecialDeath,BucklesGiants
savetagchanges
exit

echo ==Add passenger seat to Seraph and buff==

stringid add seraph_passenger
savetagnames
EditTag ui\hud\hud_messages.unic
SetString english seraph_passenger "\uE461\uE45F to ride in Seraph"
savetagchanges
exit

edittag objects\vehicles\seraph_reach\seraph_reach.vehicle
setfield Seats[0].UnitCamera.PitchRange -90 90
setfield Seats[1].Flags ThirdPersonCamera,AllowsWeapons,ThirdPersonOnEnter
setfield Seats[1].Label warthog_p
setfield Seats[1].MarkerName target_hull_center
setfield Seats[1].BoardingSeat -1
setfield Seats[1].EntryMarkerName fx_boost
setfield Seats[1].UnitCamera.CameraTracks[0].Track camera\wraith_d_camera.camera_track
setfield Seats[1].EnterSeatString seraph_passenger
savetagchanges
exit

edittag objects\vehicles\seraph_h3\weapons\seraph_beam.projectile
setfield MaximumRange 200
savetagchanges
exit

edittag objects\vehicles\seraph_h3\damage_effects\seraph_beam.damage_effect
setfield Radius 0.75 2
savetagchanges
exit

echo ==Objective weapons animations==
RunCommands "workingdir\cmds\RAMPObjectiveWeapsAnims.cmds"

echo ==MORE REFORGE BLOCK==
RunCommands "workingdir\cmds\extra_reforge_0.1.cmds"
RunCommands "workingdir\cmds\extra_reforge_0.5.cmds"
RunCommands "workingdir\cmds\extra_reforge_1.cmds"

echo ==FIXUP DOOR BUTTON==
edittag objects\levels\shared\device_controls\switches\hum_keypad_02\hum_keypad_02.device_control
SetField ActionString device_door
savetagchanges
exit

# edittag objects\levels\shared\device_controls\cov_touchscreen_m45\cov_touchscreen_m45.device_control
# SetField ActionString device_door
# savetagchanges
# exit

echo ==REGENERATOR SHIELD FX==
createtag shit objects\equipment\regenerator\fx\shield_effect_3p
edittag objects\equipment\regenerator\fx\shield_effect_3p.shield_impact
SetField Flags AlwaysRender
SetField Version 4
SetField ShieldIntensity.RecentDamageIntensity 0.5
SetField ShieldIntensity.CurrentDamageIntensity 1
SetField ShieldEdge.OvershieldScale 0
SetField ShieldEdge.DepthFadeRange 0.9
SetField ShieldEdge.OuterFadeRadius 0.35000002
SetField ShieldEdge.CenterRadius 0.5
SetField ShieldEdge.InnerFadeRadius 1
SetField ShieldEdge.EdgeGlowColor.InputVariable invalid
SetField ShieldEdge.EdgeGlowColor.RangeVariable invalid
SetField ShieldEdge.EdgeGlowColor.Function.Data 0134010014F01A000000803F0000000056E51C006F12833A6F12033B00000000
SetField ShieldEdge.EdgeGlowIntensity.InputVariable event_time
SetField ShieldEdge.EdgeGlowIntensity.RangeVariable invalid
SetField ShieldEdge.EdgeGlowIntensity.Function.Data 01340000000000400000004000000000000000006F12833A6F12033B00000000
SetField Plasma.PlasmaDepthFadeRange 0.9
setfield Plasma.PlasmaNoiseBitmap1 fx\bitmaps\plasma\plasma_clouds_512_a.bitm
setfield Plasma.PlasmaNoiseBitmap2 fx\bitmaps\plasma\plasma_clouds_512_b.bitm
SetField Plasma.TilingScale 4
SetField Plasma.ScrollSpeed 1
SetField Plasma.EdgeSharpness 5
SetField Plasma.CenterSharpness 50
SetField Plasma.PlasmaOuterFadeRadius 0.35000002
SetField Plasma.PlasmaCenterRadius 0.75
SetField Plasma.PlasmaInnerFadeRadius 1
SetField Plasma.PlasmaCenterColor.InputVariable event_time
SetField Plasma.PlasmaCenterColor.RangeVariable invalid
SetField Plasma.PlasmaCenterColor.Function.Data 013401002CF81E001739FFFF0000000035B441006F12833A6F12033B00000000
SetField Plasma.PlasmaCenterIntensity.InputVariable event_time
SetField Plasma.PlasmaCenterIntensity.RangeVariable invalid
SetField Plasma.PlasmaCenterIntensity.Function.Data 01340000CDCC4C3ECDCC4C3E00000000000000006F12833A6F12033B00000000
SetField Plasma.PlasmaEdgeColor.InputVariable event_time
SetField Plasma.PlasmaEdgeColor.RangeVariable invalid
SetField Plasma.PlasmaEdgeColor.Function.Data 0134010023E936000000803F0000000046FF3E006F12833A6F12033B00000000
SetField Plasma.PlasmaEdgeIntensity.InputVariable invalid
SetField Plasma.PlasmaEdgeIntensity.RangeVariable invalid
SetField Plasma.PlasmaEdgeIntensity.Function.Data 013400000000803F0000803F0000000000000000000000000000000000000000
setfield ExtrusionOscillation.OscillationBitmap1 fx\bitmaps\plasma\plasma_clouds_256_a.bitm
setfield ExtrusionOscillation.OscillationBitmap2 fx\bitmaps\plasma\plasma_clouds_256_b.bitm
SetField ExtrusionOscillation.OscillationTilingScale 2
SetField ExtrusionOscillation.OscillationScrollSpeed 0.15
SetField ExtrusionOscillation.ExtrusionAmount.InputVariable invalid
SetField ExtrusionOscillation.ExtrusionAmount.RangeVariable invalid
SetField ExtrusionOscillation.ExtrusionAmount.Function.Data 033400000AD7233CCDCCCC3C0000000000000000000000000000000014000000020000000000803F0000003F000080BF0000803F
SetField ExtrusionOscillation.OscillationAmplitude.InputVariable shield_vitality
SetField ExtrusionOscillation.OscillationAmplitude.RangeVariable invalid
SetField ExtrusionOscillation.OscillationAmplitude.Function.Data 01340000000000000000000000000000000000006F12833A6F12033B00000000
SetField HitResponse.HitTime 0.33333334
SetField HitResponse.HitColor.InputVariable event_time
SetField HitResponse.HitColor.RangeVariable shield_vitality
SetField HitResponse.HitColor.Function.Data 0134010008A72E00B42A280000000000000000FF6F12833A6F12033B00000000
SetField HitResponse.HitIntensity.InputVariable event_time
SetField HitResponse.HitIntensity.RangeVariable shield_vitality
SetField HitResponse.HitIntensity.Function.Data 01340000CDCCCC3DCDCCCC3D00000000000000006F12833A6F12033B00000000
SetField EdgeScales 6.666668 -2 2.5000002 -4
SetField EdgeOffsets -2.333334 2 -0.8750001 4
SetField PlasmaScales 4 4 -46 50
SetField DepthFadeParameters 1.1111112 1.1111112 0 0
savetagchanges
exit

createtag shit objects\equipment\regenerator\fx\shield_effect_1p
edittag objects\equipment\regenerator\fx\shield_effect_1p.shield_impact
SetField Flags Unused,DontRenderAsEffect
SetField Version 4
SetField ShieldIntensity.RecentDamageIntensity 0.5
SetField ShieldIntensity.CurrentDamageIntensity 1
SetField ShieldEdge.OvershieldScale 0
SetField ShieldEdge.DepthFadeRange 0.9
SetField ShieldEdge.OuterFadeRadius 0.5
SetField ShieldEdge.CenterRadius 0.5
SetField ShieldEdge.InnerFadeRadius 1
SetField ShieldEdge.EdgeGlowColor.InputVariable invalid
SetField ShieldEdge.EdgeGlowColor.RangeVariable invalid
SetField ShieldEdge.EdgeGlowColor.Function.Data 0134010014F01A000000803F0000000056E51C006F12833A6F12033B00000000
SetField ShieldEdge.EdgeGlowIntensity.InputVariable event_time
SetField ShieldEdge.EdgeGlowIntensity.RangeVariable invalid
SetField ShieldEdge.EdgeGlowIntensity.Function.Data 013400000000803F0000803F00000000000000006F12833A6F12033B00000000
SetField Plasma.PlasmaDepthFadeRange 0.9
setfield Plasma.PlasmaNoiseBitmap1 fx\bitmaps\plasma\plasma_clouds_512_a.bitm
setfield Plasma.PlasmaNoiseBitmap2 fx\bitmaps\plasma\plasma_clouds_512_b.bitm
SetField Plasma.TilingScale 4
SetField Plasma.ScrollSpeed 0.5
SetField Plasma.EdgeSharpness 5
SetField Plasma.CenterSharpness 50
SetField Plasma.PlasmaOuterFadeRadius 1
SetField Plasma.PlasmaCenterRadius 0.5
SetField Plasma.PlasmaInnerFadeRadius 1
SetField Plasma.PlasmaCenterColor.InputVariable event_time
SetField Plasma.PlasmaCenterColor.RangeVariable invalid
SetField Plasma.PlasmaCenterColor.Function.Data 013401002CF81E001739FFFF0000000035B441006F12833A6F12033B00000000
SetField Plasma.PlasmaCenterIntensity.InputVariable event_time
SetField Plasma.PlasmaCenterIntensity.RangeVariable invalid
SetField Plasma.PlasmaCenterIntensity.Function.Data 01340000CDCC4C3ECDCC4C3E00000000000000006F12833A6F12033B00000000
SetField Plasma.PlasmaEdgeColor.InputVariable event_time
SetField Plasma.PlasmaEdgeColor.RangeVariable invalid
SetField Plasma.PlasmaEdgeColor.Function.Data 0134010023E936000000803F0000000046FF3E006F12833A6F12033B00000000
SetField Plasma.PlasmaEdgeIntensity.InputVariable invalid
SetField Plasma.PlasmaEdgeIntensity.RangeVariable invalid
SetField Plasma.PlasmaEdgeIntensity.Function.Data 013400000000803F0000803F0000000000000000000000000000000000000000
setfield ExtrusionOscillation.OscillationBitmap1 fx\bitmaps\plasma\plasma_clouds_256_a.bitm
setfield ExtrusionOscillation.OscillationBitmap2 fx\bitmaps\plasma\plasma_clouds_256_b.bitm
SetField ExtrusionOscillation.OscillationTilingScale 2
SetField ExtrusionOscillation.OscillationScrollSpeed 0.15
SetField ExtrusionOscillation.ExtrusionAmount.InputVariable invalid
SetField ExtrusionOscillation.ExtrusionAmount.RangeVariable invalid
SetField ExtrusionOscillation.ExtrusionAmount.Function.Data 033400006F12033B6F12833B0000000000000000000000000000000014000000020000000000803F0000003F000080BF0000803F
SetField ExtrusionOscillation.OscillationAmplitude.InputVariable shield_vitality
SetField ExtrusionOscillation.OscillationAmplitude.RangeVariable invalid
SetField ExtrusionOscillation.OscillationAmplitude.Function.Data 01340000000000000000000000000000000000006F12833A6F12033B00000000
SetField HitResponse.HitTime 0.33333334
SetField HitResponse.HitColor.InputVariable event_time
SetField HitResponse.HitColor.RangeVariable shield_vitality
SetField HitResponse.HitColor.Function.Data 0134010008A72E00B42A280000000000000000FF6F12833A6F12033B00000000
SetField HitResponse.HitIntensity.InputVariable event_time
SetField HitResponse.HitIntensity.RangeVariable shield_vitality
SetField HitResponse.HitIntensity.Function.Data 01340000CDCCCC3DCDCCCC3D00000000000000006F12833A6F12033B00000000
SetField EdgeScales 3.333334 -4.5 -2 -2
SetField EdgeOffsets -1.166667 3 2 2
SetField PlasmaScales 4 4 -45 50
SetField DepthFadeParameters 1.1111112 1.1111112 1 1
savetagchanges
exit

createtag effe objects\equipment\regenerator\fx\shield_effect
edittag objects\equipment\regenerator\fx\shield_effect.effect
SetField Flags ForceLooping
SetField FixedRandomSeed 0
SetField RestartIfWithin 0
SetField ContinueIfWithin 0
SetField DeathDelay 0.1
SetField Priority Normal
SetField LoopStartEvent -1
SetField LocalLocation0 0
SetField RuntimeDangerRadius 0
AddBlockElements Locations 1
SetField Locations[0].MarkerName body
SetField Locations[0].Flags 0
SetField Locations[0].Priority Normal
AddBlockElements Events 1
SetField Events[0].Name active
SetField Events[0].Flags None
SetField Events[0].Priority Normal
SetField Events[0].SkipFraction 0
SetField Events[0].DelayBounds 0 0
SetField Events[0].DurationBounds 0.033333335 0.033333335
AddBlockElements Events[0].Parts 2
SetField Events[0].Parts[0].CreateInEnvironment AnyEnvironment
SetField Events[0].Parts[0].CreateInDisposition EitherMode
SetField Events[0].Parts[0].PrimaryLocation 0
SetField Events[0].Parts[0].SecondaryLocation -1
SetField Events[0].Parts[0].Flags None
SetField Events[0].Parts[0].Priority Low
SetField Events[0].Parts[0].CameraMode ThirdPersonOnly
SetField Events[0].Parts[0].RuntimeBaseGroupTag shit
SetField Events[0].Parts[0].Type objects\equipment\regenerator\fx\shield_effect_3p.shield_impact
SetField Events[0].Parts[0].VelocityBounds 0 0
SetField Events[0].Parts[0].VelocityOrientation 0 0
SetField Events[0].Parts[0].VelocityConeAngle 0
SetField Events[0].Parts[0].AngularVelocityBounds 0 0
SetField Events[0].Parts[0].RadiusModifierBounds 0 0
SetField Events[0].Parts[0].RelativeOffset 0 0 0
SetField Events[0].Parts[0].RelativeOrientation 0 0
SetField Events[0].Parts[0].AScalesValues 0
SetField Events[0].Parts[0].BScalesValues 0
SetField Events[0].Parts[1].CreateInEnvironment AnyEnvironment
SetField Events[0].Parts[1].CreateInDisposition EitherMode
SetField Events[0].Parts[1].PrimaryLocation 0
SetField Events[0].Parts[1].SecondaryLocation -1
SetField Events[0].Parts[1].Flags None
SetField Events[0].Parts[1].Priority Low
SetField Events[0].Parts[1].CameraMode IndependentOfCameraMode
SetField Events[0].Parts[1].RuntimeBaseGroupTag shit
setfield Events[0].Parts[1].Type objects\equipment\regenerator\fx\shield_effect_1p.shield_impact
SetField Events[0].Parts[1].VelocityBounds 0 0
SetField Events[0].Parts[1].VelocityOrientation 0 0
SetField Events[0].Parts[1].VelocityConeAngle 0
SetField Events[0].Parts[1].AngularVelocityBounds 0 0
SetField Events[0].Parts[1].RadiusModifierBounds 0 0
SetField Events[0].Parts[1].RelativeOffset 0 0 0
SetField Events[0].Parts[1].RelativeOrientation 0 0
SetField Events[0].Parts[1].AScalesValues 0
SetField Events[0].Parts[1].BScalesValues 0
SetField LoopingSound null
SetField LocationIndex 0
SetField BindScaleToEvent -1
SetField LocalLocation1 0
SetField AlwaysPlayDistance 0
SetField NeverPlayDistance 0
SetField RuntimeLightprobeDeathDelay 0
SetField RuntimeLocalSpaceDeathDelay 0.1
savetagchanges
exit

edittag objects\equipment\regenerator\regenerator.equipment
setfield Regenerator[0].RegeneratingEffect objects\equipment\regenerator\fx\shield_effect.effect
savetagchanges
exit

# echo == AMMO PACK ==
edittag objects\equipment\ammo_pack\ammo_pack.equipment
AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 6

AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject objects\weapons\rifle\grenade_launcher\grenade_launcher.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 1

AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject objects\weapons\rifle\needle_rifle\needle_rifle.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 21

AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject potterhalo\objects\weapons\rifle\light_machine_gun\light_machine_gun.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 60

AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject objects\weapons\support_high\stanchion\stanchion.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 4

AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject objects\weapons\pistol\needler\ramp_needler_purple.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 24

AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject objects\weapons\pistol\automag\automag.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 12

AddBlockElements AmmoPack[0].Weapons
SetField AmmoPack[0].Weapons[*].WeaponObject objects\weapons\rifle\smg_silenced\smg_silenced.weapon
SetField AmmoPack[0].Weapons[*].ClipSize 48
savetagchanges
exit

edittag objects\characters\masterchief\masterchief.model_animation_graph
addblockelements Modes[14].ModeIk
addblockelements Modes[14].ModeIk
setfield Modes[14].ModeIk[4].AttachToMarker right_hand_d_spartan
setfield Modes[14].ModeIk[5].AttachToMarker left_hand_d_spartan
setfield Modes[14].ModeIk[5].Marker left_hand
setfield Modes[14].ModeIk[4].Marker right_hand
addblockelements Modes[14].ModeIk
addblockelements Modes[14].ModeIk
setfield Modes[14].ModeIk[6].AttachToMarker left_hand_spartan
setfield Modes[14].ModeIk[6].Marker left_hand
setfield Modes[14].ModeIk[7].Marker right_hand
setfield Modes[14].ModeIk[7].AttachToMarker right_hand_spartan
addblockelements Modes[14].ModeIk
addblockelements Modes[14].ModeIk
setfield Modes[14].ModeIk[8].AttachToMarker d_left_hand_spartan
setfield Modes[14].ModeIk[8].Marker left_hand
setfield Modes[14].ModeIk[9].Marker right_hand
setfield Modes[14].ModeIk[9].AttachToMarker d_right_hand_spartan
savetagchanges
exit

# echo == TANK MODE HACKY FIXUP ==
generatebitmap objects\equipment\tankmode_equipment\tankmodehackyfix workingdir\bitmaps\tankmodeborder.dds
edittag ui\chud\tankmode.chud_definition
setfield HUDWidgets[0].BitmapWidgets[0].PlacementData[0].Anchor Crosshair
setfield HUDWidgets[0].BitmapWidgets[0].PlacementData[0].Offset 0 -1416
setfield HUDWidgets[0].BitmapWidgets[1].PlacementData[0].Anchor Crosshair
setfield HUDWidgets[0].BitmapWidgets[1].PlacementData[0].Offset 0 1135
copyblockelements HUDWidgets[0].BitmapWidgets 0 2
pasteblockelements HUDWidgets[0].BitmapWidgets
setfield HUDWidgets[0].BitmapWidgets[2].Bitmap objects\equipment\tankmode_equipment\tankmodehackyfix.bitmap
setfield HUDWidgets[0].BitmapWidgets[2].PlacementData[0].Offset 0 -1750
setfield HUDWidgets[0].BitmapWidgets[2].PlacementData[0].Scale 4.8 4.8
setfield HUDWidgets[0].BitmapWidgets[3].Bitmap objects\equipment\tankmode_equipment\tankmodehackyfix.bitmap
setfield HUDWidgets[0].BitmapWidgets[3].PlacementData[0].Offset 0 1800
setfield HUDWidgets[0].BitmapWidgets[3].PlacementData[0].Scale 4.8 4.8

SetField HudWidgets[0].BitmapWidgets[0].SortLayer SavedFilm
SetField HudWidgets[0].BitmapWidgets[1].SortLayer SavedFilm
SetField HudWidgets[0].BitmapWidgets[2].SortLayer SavedFilm
SetField HudWidgets[0].BitmapWidgets[3].SortLayer SavedFilm
savetagchanges
exit

# echo == FIX ODDBALL FIRE EFFECT ==
edittag objects\weapons\multiplayer\skull\fx\skull_fire_ground.effect
SetField Events[0].ParticleSystems[0].CameraMode ThirdPersonOnly
savetagchanges
exit

# WAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRRRRRRRRRRRNNNNNNNNNNNNNNNIIIIIIIIIIIIIIIIIIIIIIIIIIIIINNNNNNNNNGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
# MAKE SURE THIS SCRIPT IS AT THE VERY LAST LINE OTHERWISE THE WEAPONS WILL BREAK
# LOOKING MY EYES ON YOU DANK!!!!!!
# echo ==Make WaterGravityScale and WaterDamageRange the same as the AirGravityScale and AirDamageRange for every projectile to combat a BUG Fixes weapon drop and more...==
cs < "workingdir\WeaponWaterFix.cs"

AddModFiles workingdir\assets
SaveModPackage "modsfolder\RAMP.pak"

DumpLog workingdir\logs
